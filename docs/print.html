<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>hardcodes</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="20120601--1.html"><strong aria-hidden="true">1.</strong> 20120601 - Yes, it's a blog!</a></li><li class="chapter-item expanded "><a href="20120601--3.html"><strong aria-hidden="true">2.</strong> 20120601 - Jumpy on Amiga</a></li><li class="chapter-item expanded "><a href="20120601--2.html"><strong aria-hidden="true">3.</strong> 20120601 - I need space</a></li><li class="chapter-item expanded "><a href="20120619--1.html"><strong aria-hidden="true">4.</strong> 20120619 - No filesystem needed?</a></li><li class="chapter-item expanded "><a href="20120610--1.html"><strong aria-hidden="true">5.</strong> 20120610 - One-way globalization</a></li><li class="chapter-item expanded "><a href="20120603--1.html"><strong aria-hidden="true">6.</strong> 20120603 - ITIL burger anyone?</a></li><li class="chapter-item expanded "><a href="20120620--1.html"><strong aria-hidden="true">7.</strong> 20120620 - Find the button</a></li><li class="chapter-item expanded "><a href="20120621--1.html"><strong aria-hidden="true">8.</strong> 20120621 - How to ask questions</a></li><li class="chapter-item expanded "><a href="20120704--1.html"><strong aria-hidden="true">9.</strong> 20120407 - Back to the Mac</a></li><li class="chapter-item expanded "><a href="20120716--1.html"><strong aria-hidden="true">10.</strong> 20120716 - Trust the cloud</a></li><li class="chapter-item expanded "><a href="20120727--1.html"><strong aria-hidden="true">11.</strong> 20120627 - Change network adapter setting on Windows Server 2008 R2</a></li><li class="chapter-item expanded "><a href="20120813--1.html"><strong aria-hidden="true">12.</strong> 20120813 - Play with Qt</a></li><li class="chapter-item expanded "><a href="20120817--1.html"><strong aria-hidden="true">13.</strong> 20120817 - On to pastures new</a></li><li class="chapter-item expanded "><a href="20120912--1.html"><strong aria-hidden="true">14.</strong> 20120912 - 999 USD</a></li><li class="chapter-item expanded "><a href="20120913--1.html"><strong aria-hidden="true">15.</strong> 20120913 - Apple goes south</a></li><li class="chapter-item expanded "><a href="20120921--1.html"><strong aria-hidden="true">16.</strong> 20120921 - Apple and a..h.l.s</a></li><li class="chapter-item expanded "><a href="20120922--1.html"><strong aria-hidden="true">17.</strong> 20120922 - QuickMinder and iOS6, game over?</a></li><li class="chapter-item expanded "><a href="20120923--1.html"><strong aria-hidden="true">18.</strong> 20120923 - How Apple’s Obsession with Google Is Hurting Apple</a></li><li class="chapter-item expanded "><a href="20120926--1.html"><strong aria-hidden="true">19.</strong> 20120926 - Useless features</a></li><li class="chapter-item expanded "><a href="20121006--1.html"><strong aria-hidden="true">20.</strong> 20121006 - Daily UI hell</a></li><li class="chapter-item expanded "><a href="20121013--1.html"><strong aria-hidden="true">21.</strong> 20121013 - Old habits</a></li><li class="chapter-item expanded "><a href="20121016--1.html"><strong aria-hidden="true">22.</strong> 20121016 - Open with...</a></li><li class="chapter-item expanded "><a href="20121101--1.html"><strong aria-hidden="true">23.</strong> 20121101 - Quickminder</a></li><li class="chapter-item expanded "><a href="20121101--2.html"><strong aria-hidden="true">24.</strong> 20121101 - JumpyRally</a></li><li class="chapter-item expanded "><a href="20130115--1.html"><strong aria-hidden="true">25.</strong> 20130115 - NOTE: a missing vtable usually means the first non-inline virtual member function has no definition. Part 1</a></li><li class="chapter-item expanded "><a href="20130121--1.html"><strong aria-hidden="true">26.</strong> 20130121 - NOTE: a missing vtable usually means the first non-inline virtual member function has no definition. Part 2</a></li><li class="chapter-item expanded "><a href="20130123--1.html"><strong aria-hidden="true">27.</strong> 20130123 - Need some Valgrind for OSX Lion?</a></li><li class="chapter-item expanded "><a href="20130208--1.html"><strong aria-hidden="true">28.</strong> 20130208 - Useless features, part 2</a></li><li class="chapter-item expanded "><a href="20130227--1.html"><strong aria-hidden="true">29.</strong> 20130227 - Time to patch your Flash Player again</a></li><li class="chapter-item expanded "><a href="20130305--1.html"><strong aria-hidden="true">30.</strong> 20130503 - Annoying addons</a></li><li class="chapter-item expanded "><a href="20130325--1.html"><strong aria-hidden="true">31.</strong> 20130325 - iOS most wanted (updated)</a></li><li class="chapter-item expanded "><a href="20130327--1.html"><strong aria-hidden="true">32.</strong> 20130327 - Apple: a developers nightmare</a></li><li class="chapter-item expanded "><a href="20130329--1.html"><strong aria-hidden="true">33.</strong> 20130329 - Boost libraries on OSX - first contact</a></li><li class="chapter-item expanded "><a href="20130331--1.html"><strong aria-hidden="true">34.</strong> 20130331 - Boost libraries on OSX - first obstacles</a></li><li class="chapter-item expanded "><a href="20130414--1.html"><strong aria-hidden="true">35.</strong> 20130414 - Pimp the clean process in QtCreator</a></li><li class="chapter-item expanded "><a href="20130415--1.html"><strong aria-hidden="true">36.</strong> 20130415 - Handling the program version with Qt, part 1</a></li><li class="chapter-item expanded "><a href="20130415--2.html"><strong aria-hidden="true">37.</strong> 20130415 - Handling the program version with Qt, part 2</a></li><li class="chapter-item expanded "><a href="20130418--1.html"><strong aria-hidden="true">38.</strong> 20130418 - Boost libraries on OSX - obstacles almost gone</a></li><li class="chapter-item expanded "><a href="20130421--1.html"><strong aria-hidden="true">39.</strong> 20130421 - Using the Boost libraries with QtCreator on OSX</a></li><li class="chapter-item expanded "><a href="20130423--1.html"><strong aria-hidden="true">40.</strong> 20130423 - Boost libraries and QtCreator on OSX - all together now</a></li><li class="chapter-item expanded "><a href="20130520--1.html"><strong aria-hidden="true">41.</strong> 20130520 - Welcome aboard sailor!</a></li><li class="chapter-item expanded "><a href="20130527--1.html"><strong aria-hidden="true">42.</strong> 20130527 - Why I believe in Jolla</a></li><li class="chapter-item expanded "><a href="20130602--1.html"><strong aria-hidden="true">43.</strong> 20130602 - Boost up again</a></li><li class="chapter-item expanded "><a href="20130610--1.html"><strong aria-hidden="true">44.</strong> 20130610 - Powershell - get Active Directory User accounts with no employee number set</a></li><li class="chapter-item expanded "><a href="20130618--1.html"><strong aria-hidden="true">45.</strong> 20130618 - Inside the belly of the beast</a></li><li class="chapter-item expanded "><a href="20130620--1.html"><strong aria-hidden="true">46.</strong> 20130620 - Cloning the Qt git repository into a corporate environment</a></li><li class="chapter-item expanded "><a href="20130625--1.html"><strong aria-hidden="true">47.</strong> 20130625 - Howto Git?!</a></li><li class="chapter-item expanded "><a href="20130707--1.html"><strong aria-hidden="true">48.</strong> 20130707 - Timemachine and encrypted volumes - no paste possible - data save as in a vault</a></li><li class="chapter-item expanded "><a href="20130809--1.html"><strong aria-hidden="true">49.</strong> 20130809 - Howto setup a pseudo-remote Qt project</a></li><li class="chapter-item expanded "><a href="20130809--2.html"><strong aria-hidden="true">50.</strong> 20130809 - #Snowden, #NSA, #cloud, #surveillance, #escape</a></li><li class="chapter-item expanded "><a href="20130822--1.html"><strong aria-hidden="true">51.</strong> 20130822 - OSX Mountain Lion - screensaver can not show your iPhoto library anymore</a></li><li class="chapter-item expanded "><a href="20130910--1.html"><strong aria-hidden="true">52.</strong> 20130910 - Windows7 icon cache corrupt</a></li><li class="chapter-item expanded "><a href="20130924--1.html"><strong aria-hidden="true">53.</strong> 20130924 - Poor man's surveillance system with Raspberry Pi</a></li><li class="chapter-item expanded "><a href="20131016--1.html"><strong aria-hidden="true">54.</strong> 20131016 - Writing your own nslookup in C++</a></li><li class="chapter-item expanded "><a href="20131019--1.html"><strong aria-hidden="true">55.</strong> 20131019 - Building clang-format and friends on OSX Mountain Lion</a></li><li class="chapter-item expanded "><a href="20131019--2.html"><strong aria-hidden="true">56.</strong> 20131019 - Use clang-format with QtCreator</a></li><li class="chapter-item expanded "><a href="20131020--1.html"><strong aria-hidden="true">57.</strong> 20131020 - Raspberry Pi crashes AKA &quot;journal commit I/O error&quot;</a></li><li class="chapter-item expanded "><a href="20131024--1.html"><strong aria-hidden="true">58.</strong> 20131024 - Jolla / SailfishOS wishlist (updated)</a></li><li class="chapter-item expanded "><a href="20131112--1.html"><strong aria-hidden="true">59.</strong> 20131112 - State Machines - Meeting C++ 2013 aftermath 1</a></li><li class="chapter-item expanded "><a href="20131115--1.html"><strong aria-hidden="true">60.</strong> 20131115 - Shameless Plug</a></li><li class="chapter-item expanded "><a href="20131217--1.html"><strong aria-hidden="true">61.</strong> 20131207 - Developing with SailfishOS - a short introduction</a></li><li class="chapter-item expanded "><a href="20131228--1.html"><strong aria-hidden="true">62.</strong> 20131228 - Jolla wish list - reality check</a></li><li class="chapter-item expanded "><a href="20140112--1.html"><strong aria-hidden="true">63.</strong> 20140112 - Organize your data or stop being all over the map</a></li><li class="chapter-item expanded "><a href="20140114--1.html"><strong aria-hidden="true">64.</strong> 20140114 - Sometimes you need to put your finger on the product</a></li><li class="chapter-item expanded "><a href="20140116--1.html"><strong aria-hidden="true">65.</strong> 20140116 - HelloWorld! using a library on SailfishOS 1</a></li><li class="chapter-item expanded "><a href="20140118--1.html"><strong aria-hidden="true">66.</strong> 20140118 - SailfishOS - what's pkg-config?</a></li><li class="chapter-item expanded "><a href="20140120--1.html"><strong aria-hidden="true">67.</strong> 20140120 - HelloWorld! using a library on SailfishOS 2</a></li><li class="chapter-item expanded "><a href="20140121--1.html"><strong aria-hidden="true">68.</strong> 20140121 - Model, model on the wall...</a></li><li class="chapter-item expanded "><a href="20140408--1.html"><strong aria-hidden="true">69.</strong> 20140408 - Pump up the message - blocked from the promised future</a></li><li class="chapter-item expanded "><a href="20140409--1.html"><strong aria-hidden="true">70.</strong> 20140409 - Data races in STL containers</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">hardcodes</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#yes-its-a-blog" id="yes-its-a-blog">Yes, it's a blog.</a></h1>
<p>Sometimes I feel the urgent need to compensate frustrating hours of coding, reading API documentation or cursing on artificial limits of a given platform from a sacrosanct manufacturer occupying a zombie staff with a paranoid personality disorder diagnosis.</p>
<p>Instead of telling it to the hand I'll come here and flip the bird on them (verbally).</p>
<p>Maybe.</p>
<p>Or maybe I'm just holding it wrong ;-)</p>
<p>The content was once served via Apache/PHP/textpattern, now it's simply created with <a href="https://github.com/rust-lang/mdBook">mdBook</a>.</p>
<h1><a class="header" href="#jumpy-on-amiga" id="jumpy-on-amiga">Jumpy on Amiga</a></h1>
<p>Jumpy is quite old, you know. Back in the year 1989 it began jumping around on the world famous Amiga. Now that name was blocked in the iTunes AppStore® so Jumpy got JumpyRally.</p>
<p><img src="./gfx/38.jpg" alt="" /></p>
<p><img src="./gfx/39.jpg" alt="" /></p>
<p>I had started Jumpy as a personal &quot;science&quot; project back in school. It served my well in learning assembler for the Motorola 68000. One lesson was &quot;do not use hardcoded values&quot;. And there you go: it's the perfect name for this site.</p>
<h1><a class="header" href="#i-need-space" id="i-need-space">I need space</a></h1>
<p>There is this fruity company from Cupertino, giving a development environment to the people, called Xcode. It's free (as in free beer not as in free speech). It's buggy (sorry to say that - but it really is) and I often wonder if any of the people at Apple HQ ever tried to use it on a Macbook pro 13&quot;?</p>
<p>As of today it is still buyable hardware on their store, so they should have tried it. What I am ranting about is this:</p>
<p><img src="./gfx/4.jpg" alt="" /></p>
<p>Now compare this to AppCode:</p>
<p><img src="./gfx/5.jpg" alt="" /></p>
<p>You get the difference, don't you?</p>
<p>Yes, I could use those buttons in the upper right corner to get more space in the editor. And ten seconds after that I may need the left or right pane again, move the mouse pointer all the way up and change it back. Then I need more space...</p>
<p>And for the clever ones mumbling something like keyboard shortcut: have you ever tried those on a German keyboard? Vulcans may like that, I do not!</p>
<h1><a class="header" href="#no-filesystem-needed" id="no-filesystem-needed">No filesystem needed?</a></h1>
<p>Although I like using my iPad, the invisible is one major drawback. Thanks to <a href="http://www.imore.com/2012/06/18/ios-6-passbook-filesapp/">Rene Ritchie</a> I know that I am not alone at last.</p>
<p>The average user doesn't know about filesystem details and perhaps doesn't want to know but if you try to use a device like an iPad in a productive or even professional manner, you will come to the point where a filesystem is needed.</p>
<p>On a PC or Mac it is not uncommon to work on one file (or call it chunk of data if you don't care that it is actually a file) with more than one application, maybe because each has that single feature that is needed to make progress. Yes, apps can exchange files on iOS but it's crippled and there is no way to be sure that one app can give one received file back. The cloud could be the solution for this but every App developer has to reinvent the wheel if he/she wants to support iCloud and/or Dropbox and/or ...</p>
<p>One place outside the App sandbox where every app can read/write would be fine and just like iOS prevents the starting of unknown (AKA unsigned) apps it could ensure that nothing can be ever executed from this filesystem.</p>
<p>Would this be the Überfilesystem? ;-)</p>
<h1><a class="header" href="#one-way-globalization" id="one-way-globalization">One-way globalization</a></h1>
<p><img src="./gfx/8t.png" alt="" /></p>
<p>You sure did hear about globalization, it's affecting all of us whether you live in Europe, the U.S. or any other place of the world. Thousands of jobs were downsized in one part of the world to be replaced by cheaper workers in another country. Resources are transported and distributed in all parts of the world to create and produce a product in the most cost effective way. Lower the cost and raise the profit. Probably the device you are reading this on was not produced, not even assembled the country you live in.
This works quite well as long you don't try to globalize for yourself.</p>
<p>It started some years ago with <a href="http://en.wikipedia.org/wiki/Regional_lockout">regional lockout</a>. This way the provider of digital content are in control where you can consume and what price you got to pay (different markets offer different prices).</p>
<p>Well, isn't that nice?</p>
<p>Reducing the costs is just fine as a producer but is a major no-no for you as a customer.</p>
<p>Don't get me wrong - the creators of content must be paid. No doubt about that. And there are many people in this world who are <a href="http://www.forbes.com/sites/erikkain/2012/05/09/hbo-has-only-itself-to-blame-for-record-game-of-thrones-piracy/">willing to pay</a>. Hello? There are people who want to spend their money.
But they can't!</p>
<p>If you live in the wrong place of this world you got no chance to get that digital content. Here in Germany all TV shows are synchronized so they will be aired much later than in the U.S. (most TV shows are still produced there). But I want to see the original version with native speakers. I don't need the synchronized version and guess what: I do not even watch it! Yes, there are some (not so legal) ways to stream right from the US (be it iTunes, Netflix, Hulu or Amazon).
Dear content providers: don't blame piracy if you reject peoples money. You could <a href="http://theoatmeal.com/comics/game_of_thrones">learn from them</a>. Why should I go through all that hassle when torrent is so much easier?
Shouldn't the legal way be the easy one?</p>
<h1><a class="header" href="#itil-burger-anyone" id="itil-burger-anyone">ITIL burger anyone?</a></h1>
<p>Currently my girlfriend and I are lying on the sofa after we had an accidential meal: spaghetti with salmon, spinach and onions. It didn't turn out as expected but was delicious after all. Yeah, that actually happens if you really cook for yourself. That reminded me of <a href="http://www.joelonsoftware.com/articles/fog0000000024.html">Big Macs vs. The Naked Chef</a>. No, I would not call me a chef but the self created food is by far better than from Mc Donald's.
Any fast-food chain like Mc Donald's has a pedantic set of rules and methodologies that ensure the same customer experience in any branch at any place in the world. It does not matter if you order your Bic Mac in New York, Rio or Tokyo. It will taste exactly the same. They call this quality which is newspeak for average food made by morons.</p>
<p><img src="./gfx/6.jpg" alt="" /></p>
<p>Suddenly it struck me that the same goes for <a href="http://en.wikipedia.org/wiki/Information_Technology_Infrastructure_Library">ITIL (Information Technology Infrastructure Library)</a>.</p>
<blockquote>
<p>&quot;The Information Technology Infrastructure Library (ITIL), is a set of practices for IT service management (ITSM) that focuses on aligning IT services with the needs of business.[...]ITIL describes procedures, tasks and checklists that are not organization-specific, used by an organization for establishing a minimum level of competency.&quot;</p>
</blockquote>
<p>Have you ever called a service line to get support for your computer or any other technical device? Those call center agents use a flow chart to classify your problem and hopefully direct you to a competent person that can solve it for you. But there are these (not so rare) moments where your problem does not fit in. They have no flow chart, no rule to follow and you can feel the blue screen of death that paralyses the lubricated service machine (metaphorically spoken). Eventually they will keep you in the &quot;keep the customer busy&quot; routine hoping that the problem solves itself or that you give up.</p>
<p>And companies that implemented ITIL have brought the rules to perfection even more if they follow(ed) the ITIL rules by the letter not considering if those rules apply to their business or the culture of their product/customers. Here we go again: there is a set of rules that guarantee a &quot;high&quot; level of quality of service (vide supra) brought to you by a bunch of stupid morons. ITIL is not a bad thing at all, don't get me wrong but it is often implemented by people who are somehow fixated on the process of implementing itself that they loose sight for the big picture.</p>
<p>Now if you buy service from an ITIL compliant company ask yourself if you really want the average? Is that what you pay for? </p>
<h1><a class="header" href="#find-the-button" id="find-the-button">Find the button</a></h1>
<p>Have you ever moved or copied a file on Windows 7?</p>
<p><img src="./gfx/10.jpg" alt="" /></p>
<p>There are four buttons in this dialog. Yes! 4! (Ignoring the X in the upper right corner)</p>
<p>Not knowing what was wrong with the old dialog I wonder why they throw away decades of UI design knowledge and present buttons that do not set apart from the background.</p>
<h1><a class="header" href="#how-to-ask-questions" id="how-to-ask-questions">How to ask questions</a></h1>
<p>Today I found this little <a href="http://www.mikeash.com/getting_answers.html">pearl</a>.</p>
<h1><a class="header" href="#back-to-the-mac" id="back-to-the-mac">Back to the Mac</a></h1>
<p>In the year 2010 Apple announced &quot;Back to the Mac&quot; and with OSX Lion came iCloud and some Apps in iOS Design.
Calendar is one of them.</p>
<p>Despite liking the leather design or not, someone tell me please why they can't copy the full UI?</p>
<p><img src="./gfx/13.png" alt="" /></p>
<p>Why does the OSX version lack of the &quot;select the month&quot; bar?</p>
<p><img src="./gfx/12.jpg" alt="" /></p>
<p>Why is the &quot;today&quot; button on a completely different position?</p>
<p>If merging iOS and OSX Apps is the new paradigm, please be consistant at last.</p>
<h1><a class="header" href="#trust-the-cloud" id="trust-the-cloud">Trust the cloud</a></h1>
<p>Since one week I'm getting this at work:</p>
<p><img src="./gfx/15.jpg" alt="" /></p>
<p><img src="./gfx/14.jpg" alt="" /></p>
<p>Well, I hope my data is safe with Apple since it can not be accessed 8). Joking aside that just happens with Apple's (latest) Safari browser for Windows, Firefox works (and that is extraordinary, or should I say magic?).</p>
<p>They got too fast too big I fear.</p>
<p>Maybe the problem is caused by some Microsoft security updates - there was same trouble regarding certificates lately. But Apple should be aware of this if they build Software for the Windows platform.</p>
<p><em><strong>Update</strong></em></p>
<p>The problem is caused by the SSL gateway that is used in our company. That little thingy basically works like a man-in-the-middle attack and sniffs into the network traffic for viruses. Therefore it issues a new certificate that is sent to the browser. The browser will accept the new certificate because it was fed with the root certificate of the SSL gateway. Since this works fine with IE and Firefox I still think it a bug in Safari, because it doesn't even show the certificate path.</p>
<h1><a class="header" href="#change-network-adapter-setting-on-windows-server-2008-r2" id="change-network-adapter-setting-on-windows-server-2008-r2">Change network adapter setting on Windows Server 2008 R2</a></h1>
<p>How the hell did they come up with this?</p>
<p>click #1 &amp; 2</p>
<p><img src="./gfx/16.jpg" alt="" /></p>
<p>click #3</p>
<p><img src="./gfx/17.jpg" alt="" /></p>
<p>click #4</p>
<p><img src="./gfx/18.jpg" alt="" /></p>
<p>cklick #5</p>
<p><img src="./gfx/19.jpg" alt="" /></p>
<p>click #6</p>
<p><img src="./gfx/20.jpg" alt="" /></p>
<p>click #7</p>
<p><img src="./gfx/21.jpg" alt="" /></p>
<p><em>tada</em></p>
<p><img src="./gfx/22.jpg" alt="" /></p>
<p>Oh, arrived finally.</p>
<h1><a class="header" href="#play-with-qt" id="play-with-qt">Play with Qt</a></h1>
<p>Today I've tried to play with Qt. And I had an uneasy sense of what would happen if I use the online setup program.</p>
<p><img src="./gfx/23.jpg" alt="" /></p>
<p>Hooray, hooray, it's a funny day. And yet another setup program that is not proxy aware...</p>
<h1><a class="header" href="#on-to-pastures-new" id="on-to-pastures-new">On to pastures new</a></h1>
<p><img src="./gfx/24.jpg" alt="" /></p>
<p>The image speaks for itself!</p>
<h1><a class="header" href="#999-usd" id="999-usd">999 USD</a></h1>
<p>Tonight Apple will present the next iteration of iPhone and iOS6 is about to come.</p>
<p>Will it bring wanted features? Yes!</p>
<p>Will it bring more pain to developers? Yes!</p>
<p>The latter is the reason that I will give up developing for iOS in the near future. Since I did this a hobby that's not a big loss for the fruit company and neither for me. It's my spare time and I don't need to fill it with pain. Maybe I will be paid in future to endure this pain then I will speak Objective-C again.</p>
<p>It was fun also and a big thank you goes out to all who bought QuickMinder and the little but impressive crew that made the beta testing.
I've learned a lot on that way and that's what &quot;coding just for fun&quot; is all about.</p>
<p>What has that to do with USD 999?</p>
<p>Nothing.</p>
<p>Almost nothing.</p>
<p>I've decided to test if raising the price to the max for 1 day would cause any eruptions.</p>
<p>Like: would one really buy the app for this price? I doubt that. Will it raise a red flag somewhere? Will it put the app in front of the iTunes store? I don't know but I am curious :-)</p>
<h1><a class="header" href="#apple-goes-south" id="apple-goes-south">Apple goes south</a></h1>
<p>After a boring iPhone update and ugly iPods I decided to have a look into the iTunes Store: what's the current price for QuickMinder?</p>
<p>Expected were exorbitant USD 999.</p>
<p>I found: nothing, the app is gone from the store. iTunes Connect tells me everything is fine, no mail, nothing. Well, let's see what happens on the next morrow...</p>
<p>Changed it to USD 99.99 and it reappeared.</p>
<p>funny</p>
<p>not</p>
<h1><a class="header" href="#20120921---apple-and-ahls" id="20120921---apple-and-ahls">20120921 - Apple and a..h.l.s</a></h1>
<p><img src="https://i.chzbgr.com/completestore/12/9/17/hb7jSzqYtUK-Wvm-oVAbdw2.jpg" alt="found on https://i.chzbgr.com/completestore/12/9/17/hb7jSzqYtUK-Wvm-oVAbdw2.jpg" /></p>
<h1><a class="header" href="#quickminder-and-ios6-game-over" id="quickminder-and-ios6-game-over">QuickMinder and iOS6, game over?</a></h1>
<p><img src="./gfx/25.png" alt="" /></p>
<p>You've upgraded your iPod, iPhone or iPad to iOS6 and now the &quot;Autosend&quot; feature of QuickMinder doesn't work anymore?</p>
<p>Well, bad luck! Blame Apple and not me. For some obscure reasons they've raised the bar of &quot;security&quot; to a new level. But this time it isn't really about security, they don't want that the mail view in iOS can be used this way. This is not by accident, Apple <em>invented</em> bad user &amp; developer treatment.</p>
<p>If you've bought QuickMinder, I am very thankful for that! But I am sorry to tell you, that Apple has made it impossible to reactivate this feature ever again! This is sad for you, because I think it was a very useful feature in QuickMinder and made life easier. It's sad for me (sad is not the right word, but more polite) and made me come to the only decision that is appropriate here: I will stop developing for iOS. In the end that doesn't hurt Apple and it doesn't hurt me.</p>
<p>Game over!</p>
<h1><a class="header" href="#how-apples-obsession-with-google-is-hurting-apple" id="how-apples-obsession-with-google-is-hurting-apple">How Apple’s Obsession with Google Is Hurting Apple</a></h1>
<p>Surprising frankly article on <a href="http://www.cultofmac.com/192350/how-apples-obsession-with-google-is-hurting-apple/">CultOfMac</a>.</p>
<h1><a class="header" href="#useless-features" id="useless-features">Useless features</a></h1>
<p><img src="./gfx/26.jpg" alt="" /></p>
<p>In the last weeks there were some severe security breaches in the Java world. Most of them had in common that a Java applet was started using a browser on a prepared website. Personally I've switched of the use of Java applets on all machines/browsers, so I should be quite safe.</p>
<p>Today I've stumbled upon a feature in Firefox: <code>click_to_play</code>  --- it's not so very hot and new as a little googleing showed.</p>
<p>This tiny little boolean controls whether Firefox starts plugins etc. while browsing the web.</p>
<p>So, I didn't know about this feature. Why? Because you have to dive into that longish about:config page that controls/shows the Firefox settings behind the scene. Behind the scene is all my today's rant is about: make it default AND make a checkbox somewhere on the security tab in the options/preferences. You'd be surprised: users could use that feature. And it's spelled USErs.</p>
<h1><a class="header" href="#daily-ui-hell" id="daily-ui-hell">Daily UI hell</a></h1>
<p>In our company we use Lotus Notes (yeah, pity me now). Not only is Lotus Notes an ugly email client it is also used for collaboration, which goes for me as far as using a calendar.</p>
<p>Now what do you think if you can see this? (just ignore the German names here for a little moment)</p>
<p><img src="./gfx/27.jpg" alt="" /></p>
<p>I don't know what you think but I think of a dropdown box. Using Windows since version 3.11 (and knowing since version 2) and many other graphical user interfaces some sort of conditioning took place. If I see that little downwards looking arrow on the right side, I am sure there is a dropdown box hiding.</p>
<p><img src="./gfx/28.jpg" alt="" /></p>
<p>And it would make perfectly sense here: you often need to change the month (quickly) and 12 months = 12 items that fit well in a dropdown box. That would even work on VGA standard resolution.
Knowing and expecting that my eyes focus the area under the GUI element.</p>
<p>Then a click...</p>
<p>Bazinga!</p>
<p>I'm getting a tiny calendar.</p>
<p><img src="./gfx/29.jpg" alt="" /></p>
<p>The eyes start looking for orientation, perceive the current month on top of the box (that isn't even exactly under the previous GUI element. It partly hides it and is slightly shifted to the left), jump back to the calendar.
Where are my months?</p>
<p>Cognition.</p>
<p><img src="./gfx/30.jpg" alt="" /></p>
<p>The arrows on the upper left and right are for flipping to the previous or next month. In my eyes this little task got already complicated for exactly that purpose: flipping to the previous or the next month.</p>
<p>But what if I want to skip several months?</p>
<p>click, clickedy, click, click.</p>
<p>Sorry folks, but what in the name of did the designers of Lotus Notes think here?
And now think again about the German names for days and months. Oh, how can I express my deep love for this kind of software?</p>
<h1><a class="header" href="#old-habits" id="old-habits">Old habits</a></h1>
<p>With my iPad came the &quot;need&quot; for the iCloud and at this point I started using Apple's Safari browser. Being a &quot;switcher&quot; from Windows I was used to Internet Explorer and much more to Firefox. The latter was my browser of choice when I entered the universe of Jobs. But synchronizing the bookmarks between the iPad and my desktop computer made totally sense, so I gave Safari a try.</p>
<p>Nope, this is not about which browser is better or the best at all.</p>
<p>It's about some GUI detail that took me by surprise.</p>
<p><img src="./gfx/31.jpg" alt="" /></p>
<p>So this was Safari after all. Not so unusual, isn't it? Besides having the bookmarks on the desktop, too, it felt like it should. Hey it's a browser, not the holy grail.
Until...</p>
<p>...I wanted to search something in Google. Simple enough, one could think. Yes, but...</p>
<p>...where is the textfield for the search term?</p>
<p>Where should I enter what I was looking for?</p>
<p>Lacking any alternative I entered the words in the URL bar and voilá I was in Google.
And of course, it is so simple to differ betweens URLs and search terms, just using a regex.</p>
<p>What really struck me was the question &quot;why on earth have so many browsers two textfields for that?&quot;
Because there work geniuses at Apple?</p>
<p>Well, have you seen Safari on IOS? These little devices with really small screen real estate? One should think that these are exactly the kind of devices that have born the idea of just using one textfield. And then they brought it &quot;Back To The Mac&quot;.</p>
<p>Look for yourself:</p>
<p><img src="./gfx/32.jpg" alt="" /></p>
<h1><a class="header" href="#open-with" id="open-with">Open with...</a></h1>
<p>Today I was trying to compile a Qt test project with an external library and the issues kept on coming. Not bad for 4 lines of code...</p>
<p>But then I remembered being there before: maybe the wrong toolchain was set up for this project.</p>
<p>Yes, indeed: MinGW and not one of the Microsoft compilers. No problem, let's just change the settings and ... full brake. I can't select another (from the existing and configured) toolchain(s). What version of QtCreator did start up? 2.4.1! (There seems to be a bug but a new version is available so do not mind).</p>
<p>But why? I told Windows that I want the new version to open .pro files.</p>
<p>Ok, context menu again and...</p>
<p><img src="./gfx/33.jpg" alt="" /></p>
<p>Well, thank you Microsoft: I can choose between qtcreator.exe and qtcreator.exe. Which witch is which one? The right one (in my case) but why not show any details to the executable? There is not even a context menu, there is <i>nothing</i>.</p>
<p>Is it only me? Am I the only person experiencing all those quirks and bugs?</p>
<h1><a class="header" href="#quickminder-updated" id="quickminder-updated">Quickminder (updated)</a></h1>
<p><img src="./gfx/42.jpg" alt="" /></p>
<p><em>This software was sold in the Apple Appstore but is not <a href="./20120922--1.html">available</a> anymore</em></p>
<p>A thought, an idea, something you need to do crossed your mind: capture it quick, easy and fast with QuickMinder. Predefine up to four recipients for your thoughts and send them via email. It takes just two steps: Type your text in QuickMinder, push the button with your predefined recipient and the email will be sent. Set up once and you are good to go.</p>
<p>Features:</p>
<ul>
<li>universal app, runs on iPhone, iPod touch and iPad</li>
<li>iPad: up to four recipients for your emails</li>
<li>iPhone/iPod touch: up to two recipients for your emails</li>
<li>look recipients in your address book</li>
<li>uses the first line of text as a subject</li>
<li>use a predefined subject</li>
<li>turn off word correction if you like</li>
<li>delete text automatically after you have sent your message if you like</li>
<li>show keyboard directly after start, be quicker with writing</li>
<li>runs in portrait and landscape mode</li>
<li>sends mail using your mail account, mails come from you, no extra service needed</li>
<li>insert current GPS coordinates if you like</li>
<li>supports Retina Display</li>
<li>supports creating and attaching photos</li>
<li>supports TextExpander Touch</li>
</ul>
<p><img src="./gfx/43.jpg" alt="" /></p>
<h1><a class="header" href="#jumpyrally-updated" id="jumpyrally-updated">JumpyRally (updated)</a></h1>
<p><em>This software was sold in the Apple Appstore but is not <a href="./20120922--1.html">available</a> anymore</em></p>
<p>JumpyRally is a retro style jump'no'run. You read that right! So take the challenge and help Jumpy to jump around, collect and rally all gold coins. But beware of those villains, they will exhaust your energy!</p>
<p>Jumpy is quite old, you know. Back in the year 1989 it began jumping around on the world famous Amiga. Now that name was blocked in the iTunes AppStore® so Jumpy got JumpyRally. This game is a little reminiscence of that golden homecomputer age. Programs were written in Assembler most of the time...
And why is Jumpy collecting all that gold?</p>
<p>Look at him: he's from outerspace. Guess what, he needs money to get back <img src="./gfx/40.png" alt="" /></p>
<p>Simply touch the left half of the screen to move left and vice versa: touch the right half of the screen to move right. Jumpy lives up to his name: he jumps up and down, that's how you get him through the maze.</p>
<p>Have a <a href="./20120601--3.html">glimpse</a> at the past.</p>
<p><img src="./gfx/41.jpg" alt="" /></p>
<h1><a class="header" href="#note-a-missing-vtable-usually-means-the-first-non-inline-virtual-member-function-has-no-definition-part-1" id="note-a-missing-vtable-usually-means-the-first-non-inline-virtual-member-function-has-no-definition-part-1">NOTE: a missing vtable usually means the first non-inline virtual member function has no definition. Part 1</a></h1>
<p>Currently I am trying to learn C++ and using the Qt framework. Every now and then the linker complains &quot;NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.&quot;</p>
<p>So far, so good.</p>
<p>I've googled what that means in detail and hunted down most of the bugs that caused this &quot;message of horror&quot;. But right now I am sitting in front of a piece of code that is, well, correct. At least I can't see any errors and not why the linker complains. My fault for sure. Let's see where this journey ends.</p>
<p>Some articles gave a hint for a new run of the moc compiler to create the stuff that comes in your code with <code>QObject</code>. That sounded sane first, because I have added <code>QObject</code> to the class later during coding to use signals and slots. It was a pure C++ class first. On the other hand I have done the clean/run qmake routine some times now - just to be sure.</p>
<p>But curiosity led to me to have a closer look to the filesystem, since the moc compiler should create some files in the destination directory. It did. The mess was in the source directory: I had changed a class from <code>.CPP</code> to <code>.MM</code> because it got some Objective-C code. Well, QtCreator left the <code>.CPP</code> file where it was and made a new copy. Thus during compiling this file caused the trouble (what is somehow mysterious in itself: the <code>.CPP</code> file wasn't mentioned in the <code>.PRO</code> file).</p>
<p>Never totally trust your IDE ;-)</p>
<p>Ok, all is fine now...should be...added a signal and a slot and even after the clean/run qmake routine <em>the</em> message comes again.</p>
<p><img src="./gfx/34.jpg" alt="" /></p>
<p>But that's another story...!</p>
<h1><a class="header" href="#note-a-missing-vtable-usually-means-the-first-non-inline-virtual-member-function-has-no-definition-part-2" id="note-a-missing-vtable-usually-means-the-first-non-inline-virtual-member-function-has-no-definition-part-2">NOTE: a missing vtable usually means the first non-inline virtual member function has no definition. Part 2</a></h1>
<p>As mentioned in the last article I've added signals and slots to an existing class and ran into the linker error of a missing vtable.
No old or bad files in the source directory this time.</p>
<p>But lack of a <code>mod_nameofclass.cpp</code> file in the build directory.</p>
<p>Why? I ran <code>qmake</code> all the time to make sure that the build systems knows about the class now using the Qt macro system. After a while I decided to move the header file from <code>OBJECTIVE_HEADERS</code> to  <code>HEADERS</code> in the <code>.PRO</code> file. So far I chose <code>OBJECTIVE_HEADERS</code> because it is part of an Objective-C implementation file or to be more precise an <code>Objective-C++</code> implementation.</p>
<p>Guess what? Clean project, run qmake and build. Voilá!</p>
<p>:-D</p>
<h1><a class="header" href="#need-some-valgrind-for-osx-lion" id="need-some-valgrind-for-osx-lion">Need some Valgrind for OSX Lion?</a></h1>
<p>Open you terminal and there you go.</p>
<p>First of all the autotools are missing (use newer versions if available).</p>
<pre><code>export build=~/devtools # or wherever you'd like to build
mkdir -p $build
cd $build
curl -OL http://ftpmirror.gnu.org/autoconf/autoconf-2.68.tar.gz
tar xzf autoconf-2.68.tar.gz
cd autoconf-2.68
./configure --prefix=$build/autotools-bin
make
make install
export PATH=$PATH:$build/autotools-bin/bin
</code></pre>
<p>Next missing piece.</p>
<pre><code>cd $build
curl -OL http://ftpmirror.gnu.org/automake/automake-1.11.tar.gz
tar xzf automake-1.11.tar.gz
cd automake-1.11
./configure --prefix=$build/autotools-bin
make
make install
</code></pre>
<p>Last missing piece.</p>
<pre><code>cd $build
curl -OL http://ftpmirror.gnu.org/libtool/libtool-2.4.tar.gz
tar xzf libtool-2.4.tar.gz
cd libtool-2.4
./configure --prefix=$build/autotools-bin
make
make install
</code></pre>
<p>Last but not least download the latest Valgrind sources and compile them.</p>
<pre><code class="language-cd~/valgrind-3.8.1">./autogen.sh
./configure --prefix=$build/valgrind-bin
make
export PATH=$PATH:$build/valgrind-bin/bin
</code></pre>
<h1><a class="header" href="#useless-features-part-2" id="useless-features-part-2">Useless features, part 2</a></h1>
<p>A while ago I wrote about <a href="./20120926--1.html">useless features</a>. Mozilla put the great &quot;click to play&quot; function into Firefox but forgot to tell the users about it. This feature <del>is</del> was really cool. When loading a webpage all plugins weren't loaded, just a placeholder. Improved security (can you say Flash?) and speed. On the other hand the user could start a specific plugin on demand.</p>
<p>After the last update Firefox brings up a popup on every page that has plugins.</p>
<p><img src="./gfx/35.jpg" alt="" /></p>
<p>If you choose &quot;not now&quot;, you will see this popup every time you visit the page again. Yeah, a built-in nag screen, come on Mozilla hurt me plenty.
If you choose &quot;Never activate plugins for this site&quot;, you get what you want. Or not? Well, the site is loaded without any plugins, that's true. But what if I want to activate a specific one? No, no my friend, there is only all or nothing. If you want to change the setting, you must click on the blue brick that is shaped like a kids toy.</p>
<p>So there remains &quot;Always activate plugins for this site&quot;. You want or must use a plugin for a site. Then you got no choice, you must activate it for the whole page. No more security, no more download speed.</p>
<p>And last but not least there are some sites with the old behavior, quite confusing.</p>
<p>Thank you Mozilla.</p>
<p><em><strong>NOT!</strong></em></p>
<h1><a class="header" href="#time-to-patch-your-flash-player-again" id="time-to-patch-your-flash-player-again">Time to patch your Flash Player again</a></h1>
<p>Well, it's time to apply the latest patch to the Adobe Flash Player. Besides being a pain in the neck (because it happens so often - I wonder if the suicide rate of enterprise admins correlates with that), it's no problem on the Mac. Go to preferences, start the Adobe Flash Player preferences pane, click &quot;Advanced&quot;, click &quot;Check Now&quot;. A web service is called or just an URL is checked - I don't know and I don't want to know - and you get the message that a new update is available. Then you are asked if you want to download and apply it.</p>
<p>Easy as pie.</p>
<p><em>Of course you can wait until the auto update mechanism tells you that there is an update.</em></p>
<p>Now look at the control panel from Windows:</p>
<p><img src="./gfx/45.jpg" alt="" /></p>
<p>What would you expect to happen if you click on &quot;Check Now&quot;? Same as above? Don't be so naive.
A website opens and tells you the latest version for different operating systems. The rest is done with your bare hands, choose right version, download, start setup, yada yada yada.</p>
<p><em><strong>CRAZY</strong></em></p>
<h1><a class="header" href="#annoying-addons" id="annoying-addons">Annoying addons</a></h1>
<p>Time to update Java again, come and join the fun - NOT.</p>
<p><img src="./gfx/46.jpg" alt="" /></p>
<p>Not only that keeping Java up to date seems to be very time consuming lately but to uncheck this damned checkbox each and every time is annoying.</p>
<p><em>P.S.: Yes, I can smile :-) Don't think I am all about ranting.</em></p>
<h1><a class="header" href="#ios-most-wanted-updated" id="ios-most-wanted-updated">iOS most wanted (updated)</a></h1>
<p>Here is my own personal list of features I miss most in the Apple universe:
<em>just for the record, most of those items here were written while I was still on iOS 5.1</em></p>
<ul>
<li>
<p><em>Date</em> Why the heck don't you display the current date next to the time? Can't be that hard. Yes, there is a calendar app but that's not the point and it's not even 100 % sure that it shows the current day!</p>
</li>
<li>
<p><em>Store wishlists</em> This one goes for every store there is so far: iTunes, Appstore. iTunes U is a separate app now, podcast will become with iOS 6 but under hood they still use iTunes - I guess.
Sometimes there is something interesting to be found and you are not 100 % sure if you want to buy it. Or maybe in case of a movie you're missing the right company ;-)</p>
<p>Wouldn't it be nice to drop such items on a wishlist? Look at Amazon. They know the way. By the way: iTunes and Appstore are crap, Apple could learn so much from Amazon there. (It's so hard to find something in iTunes/Appstore even if you have a precise idea of what you are looking for)</p>
<p>Developers can't even change the keywords or category of an app once it's gone online :-/</p>
</li>
<li>
<p><em>Free trials</em> Developing software is hard work and therefore it is no miracle that developers want to sell their software on the Appstore and not give it away for free. That is totally fine and they should get their money if they did a good job. But here is the problem: how to find out if they did a good job? On the Appstore it's first buy and then...maybe be happy or maybe suffer.</p>
<p>Often there are light versions for free to be found on the store but these versions are intentionally crippled. Developers must cripple them, they got no other choice. If those versions were feature complete, nobody would buy the &quot;full&quot; version even if the customer is satisfied - they are selfish humans in the end. But a crippled version doesn't necessarily show me how good the full version is.</p>
<p>Wouldn't it be nice if you could try the full version for - let's say - one week? If you don't like it, it simply should stop working after that period. If you decide to buy then - and only then - you can install it on another device. The user experience should be the same with every app and the user should not be able to bypass it - there you go, it must be implemented on OS level.</p>
<p>I think that would make both developers and customers very happy.</p>
<p>Have a look at this article from <a href="http://osxdaily.com/2013/02/26/5-improvements-features-the-ios-app-store-badly-needs/">OSX Daily</a>. I am not alone :-)</p>
</li>
<li>
<p><em>Filesystem</em> Although I can somehow understand the approach Apple took in completely hiding the filesystem, I still <a href="./20120619--1.html">want that feature</a>! Nothing Windows 8 has shown so far makes me really happy or even want to change. But the access to the filesystem could make the difference! <em>Update</em> Have a look at Blackberry 10. They have sandboxed Apps and a way to share data via filesystem.</p>
<p>Apps like <a href="http://9to5mac.com/2013/02/28/review-files-is-the-finder-for-ios-youve-been-waiting-for/">Files</a> (article on 9to5mac) are not the solution as the developers have to follow (or is obey the better word?) the same restrictions</p>
</li>
<li>
<p><em>Keyboard navigation</em> Writing on a touch device with only visual feedback is pain in itself. If you misspelled something and want to correct it, iOS gets nasty. Your only chance is tapping in the text field, wait 3 seconds and shift the magnifying glass. Oh there is another bug, tap again, wait 3 seconds, adjust the magnifier and so on and so on. Screen real estate is precious, but please: put at least cursor left/right on the keyboard.</p>
</li>
<li>
<p><em>Save as PDF</em> Ever found a website and wanted to print it to a PDF? Me too! PDF support is built in iOS but as Apple decided that there is no need of a filesystem (I keep on repeating) they thought it would not be necessary to save a website content. Yes, I know the concept of bookmarks but the web changes as you may know. If any app that supports opening of PDFs could be targeted with the print output, such a file could be saved to Dropbox or any other cloudy kind of storage.</p>
</li>
<li>
<p><em>AirPlay Mirroring</em> Yeah, there is some AirPlay Mirroring in iOS. But I want mirror any device to any other device, like iPod to iPad, my Mac to my iPad and any other combination that makes sense regarding screen resolution. How many OS generations shall we wait? Money for developers shouldn't be Apple's problem right now.</p>
</li>
<li>
<p><em>Easy data exchange</em> Ever tried to paste the URL of a Youtube video (from the Youtube app) to Facebook? Did you ever try to attach a picture from inside the Mail app? (Or worse: data from another non-Apple-App)</p>
<p>Then you know what I am talking about.</p>
</li>
<li>
<p><em>SMS on iPad</em> If you have an iPad with 3G network it would be nice to be able to send and receive SMS. It even works with cheap UMTS/WLAN modems, why not with the high prized iPad?
And for those who say &quot;use mail or messages&quot;: yeah, and what if I need to tweak my dataplan via SMS? There are countries in this world where they got unregistered prepaid SIM cards.</p>
</li>
<li>
<p><em>Close all recently used apps</em> If you press the home button or swipe up with four fingers you get a list of the recently used apps. That's nice if there were only a few in this list but after a while it gets filled up and thus useless. What is a list good for that's more complicated to search in than restarting the app from the &quot;desktop&quot; icon? It ain't real multitasking: the most apps in background don't get a single cpu cycle. Please bring a button to close them all.</p>
</li>
<li>
<p><em>Improved bookmark editing</em> With Safari on a Mac you can (like with any other browser) edit, sort and search your bookmarks using the complete screen real estate. No big problem if you only got a few, but I've got many of them, because Safari completes the URL for me if it's in the bookmarks.</p>
<p>BTW: why is it not possible to add/edit/use the stored bookmarks on the iCloud website?</p>
</li>
<li>
<p><em>PDF with index</em> Yepp, iOS can show you a PDF file (and I haven't found one that can not be shown, but there will be sure files outside that can't), you can scroll up/down, pinch in/out just fine.
But it lacks the capability of showing and using the index of the PDF (if it has one).</p>
<p>What a bummer!</p>
</li>
<li>
<p><em>Better WiFi</em> Compared to my Macs the WiFi is sometimes bumpy and sluggish. Fix that, damn it! And while you are at it: I want to delete entries from &quot;known networks&quot;.</p>
</li>
<li>
<p><em>Bluetooth</em> Bluetooth, you are asking? but my i* has Bluetooth! Yes it has. But only for keyboards and headphones. Ever tried to exchange data with a non-Apple-device? Even more than ten year old phones can do that without problems. It simply works there :-/</p>
</li>
<li>
<p><em>Shuffle playlists</em> &quot;Wait a moment, my iTunes has a shuffle function&quot; you say? Well, yes it does have something that is called shuffle but in my eyes that is the world's worst manifestation of such a thing. Yours truly associates shuffle with random playlists and sorry dear reader: the playlists on iTunes are in no random order at all (if shuffle is activated, of course). And before you mention it, yes I know there isn't such a thing as &quot;chance&quot; from a computerized random generator. So the art is in seeding that thing in such a way that it appears naturally to us humans. But that Apple shuffle algorithm prefers songs you have listened often to and therefore becomes a self-fulfilling prophecy. Songs played in shuffle mode are then preferred to be played in shuffle mode because they have been played more often (in shuffle mode). Hooray, but I want to hear a random selection of all my songs. Even with dynamic playlists and some clever rulesets you can't emulate that.</p>
<p>By the way and off topic: thanks to Apple you can't even see the order of the shuffled songs.</p>
<p>Do they even use that software to hear music?</p>
<p>If you still don't believe me: sync you iPod with you iTunes on your Mac. Start a shuffle play of some playlist on the computer for ten (or even hundred ) songs. Start a shuffle play on your iPod on the same playlist a week (!) or a month (!) later and you will hear exactly the same order of songs. Year, the blinded devotees will call that a feature...</p>
</li>
<li>
<p><strong>Upgraded to 6.1.3</strong></p>
</li>
<li>
<p><em>Sync iTunes U</em> Wouldn't it be nice to have course subscriptions from the iPad to show up in iTunes on your Mac (and vice versa)?</p>
</li>
</ul>
<h1><a class="header" href="#apple-a-developers-nightmare" id="apple-a-developers-nightmare">Apple: a developers nightmare</a></h1>
<p><a href="http://www.theverge.com/2013/3/26/4148628/why-doesnt-icloud-just-work">This</a> is exactly the reason why I quit iOS development. Not the iCloud per se, but the way Apple communicates with developers. They just do <em>not</em>.</p>
<p>To make that clear: iOS development was just a hobby and I don't want to spend time on a frustrating hobby. Being paid for it would be still frustrating but better somehow ;-)</p>
<h1><a class="header" href="#boost-libraries-on-osx---first-contact" id="boost-libraries-on-osx---first-contact">Boost libraries on OSX - first contact</a></h1>
<p>So here I am, still learning C++ and using the Qt framework. Recently I wanted to know how much disk space is left on a device, so that I can decide if an operation takes place at all.</p>
<p>Surprisingly there is nothing in the regular Qt framework. There seem to be some leftovers in a part of the mobile framework from the Nokia days. But those are not in the distribution that can be downloaded from the Qt project page.</p>
<p>After some research in the forum and our friend Mr. Google I stumbled over the Boost libraries (again - it wasn't for the first time). So I went over to their homepage and hit the</p>
<p><img src="http://www.boost.org/style-v2/css_0/get-boost.png" alt="Image source: http://www.boost.org/style-v2/css_0/get-boost.png" /> button.</p>
<p>Most parts of the boost libraries are header only, they need no compiling at all. Whut? Yes, they are a bunch of clever templates that do all the work for you. So, download, unzip and there you go (have a look in their <a href=":http://www.boost.org/doc/libs/release/more/getting_started/index.html">getting started guide</a>.</p>
<p>But I wanted something that works with the filesystem and is platform-independent. That's the part where some compiling comes into place. Part of the download was the <a href="http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm">Boost.Filesystem library</a>. How to compile is described <a href="http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#prepare-to-use-a-boost-library-binary">here</a>.</p>
<p>So why is he writing all that stuff here if everything is documented on the Boost homepage? Well, that's kind of a self-therapy. By writing down the steps needed, I can memorize them better and if I need the information in future, I know where to find it. Beyond that it's written in my own language using my wording. Basically the same information but it goes faster into my brain. Last but not least there is the fact that you have understood it for yourself when you can tell others how to do it.</p>
<p>Open you terminal and there you go.</p>
<p>Make a directory where the Boost libraries go and put the downloaded file there</p>
<pre><code>export build=~/devtools # or wherever you'd like to build
mkdir -p $build
cd $build
</code></pre>
<p>I could have put a fancy curl command here but since I wanted that get Boost button in here, I assume that you put the file in there with Finder.</p>
<pre><code>tar -xzf boost_1_53_0.tar.gz
</code></pre>
<p>Go into the new boost_1_53_0 directory and for a first glance enter</p>
<pre><code>./bootstrap.sh --help

`./bootstrap.sh' prepares Boost for building on a few kinds of systems.
Usage: ./bootstrap.sh [OPTION]... 
Defaults for the options are specified in brackets.
Configuration:
  -h, --help                display this help and exit
  --with-bjam=BJAM          use existing Boost.Jam executable (bjam)
                            [automatically built]
  --with-toolset=TOOLSET    use specific Boost.Build toolset
                            [automatically detected]
  --show-libraries          show the set of libraries that require build
                            and installation steps (i.e., those libraries
                            that can be used with --with-libraries or
                            --without-libraries), then exit
  --with-libraries=list     build only a particular set of libraries,
                            describing using either a comma-separated list of
                            library names or &quot;all&quot;
                            [all]
  --without-libraries=list  build all libraries except the ones listed []
  --with-icu                enable Unicode/ICU support in Regex 
                            [automatically detected]
  --without-icu             disable Unicode/ICU support in Regex
  --with-icu=DIR            specify the root of the ICU library installation
                            and enable Unicode/ICU support in Regex
                            [automatically detected]
  --with-python=PYTHON      specify the Python executable [python]
  --with-python-root=DIR    specify the root of the Python installation
                            [automatically detected]
  --with-python-version=X.Y specify the Python version as X.Y
                            [automatically detected]

Installation directories:
  --prefix=PREFIX           install Boost into the given PREFIX
                            [/usr/local]
  --exec-prefix=EPREFIX     install Boost binaries into the given EPREFIX
                            [PREFIX]

More precise control over installation directories:
  --libdir=DIR              install libraries here [EPREFIX/lib]
  --includedir=DIR          install headers here [PREFIX/include]
</code></pre>
<p>Ok, the option --show-libraries will tell us, what is in stock here.</p>
<pre><code>./bootstrap.sh --show-libraries

-n Building Boost.Build engine with toolset darwin... 
tools/build/v2/engine/bin.macosxx86_64/b2
The following Boost libraries have portions that require a separate build
and installation step. Any library not listed here can be used by including
the headers only.
The Boost libraries requiring separate building and installation are:
    - atomic
    - chrono
    - context
    - date_time
    - exception
    - filesystem
    - graph
    - graph_parallel
    - iostreams
    - locale
    - math
    - mpi
    - program_options
    - python
    - random
    - regex
    - serialization
    - signals
    - system
    - test
    - thread
    - timer
    - wave
</code></pre>
<p>OK, we wanted something for the filesystem and surprise, surprise: it's called filesystem.</p>
<p>The option --with-libraries tells that bootstrap script which library to build (if not all and I just want that file thingy). On top of that we can use --prefix to tell where the build library goes in our filesystem. Long story short:</p>
<pre><code>./bootstrap.sh --prefix=$build/boost_1_53_0/filesystem --with-libraries=filesystem
-n Building Boost.Build engine with toolset darwin... 
tools/build/v2/engine/bin.macosxx86_64/b2
-n Unicode/ICU support for Boost.Regex?... 
not found.
Generating Boost.Build configuration in project-config.jam...
Bootstrapping is done. To build, run:
    ./b2
To adjust configuration, edit 'project-config.jam'.
Further information:
   - Command line help:
     ./b2 --help
     
   - Getting started guide: 
     http://www.boost.org/more/getting_started/unix-variants.html
     
   - Boost.Build documentation:
     http://www.boost.org/boost-build2/doc/html/index.html
</code></pre>
<p>We will se if the <em>&quot;Unicode/ICU support for Boost.Regex?... not found.&quot;</em> message means anything. Enter</p>
<pre><code>./b2

Building the Boost C++ Libraries.
Component configuration:

    - atomic                   : not building
    - chrono                   : not building
    - context                  : not building
    - date_time                : not building
    - exception                : not building
    - filesystem               : building
    - graph                    : not building
    - graph_parallel           : not building
    - iostreams                : not building
    - locale                   : not building
    - math                     : not building
    - mpi                      : not building
    - program_options          : not building
    - python                   : not building
    - random                   : not building
    - regex                    : not building
    - serialization            : not building
    - signals                  : not building
    - system                   : not building
    - test                     : not building
    - thread                   : not building
    - timer                    : not building
    - wave                     : not building

...patience...
...found 507 targets...
...updating 46 targets...
common.mkdir stage
common.mkdir stage/lib
common.mkdir bin.v2
common.mkdir bin.v2/libs
common.mkdir bin.v2/libs/system
common.mkdir bin.v2/libs/system/build
common.mkdir bin.v2/libs/system/build/darwin-4.2.1
common.mkdir bin.v2/libs/system/build/darwin-4.2.1/release
common.mkdir bin.v2/libs/system/build/darwin-4.2.1/release/threading-multi
darwin.compile.c++ bin.v2/libs/system/build/darwin-4.2.1/release/threading-multi/error_code.o
darwin.link.dll bin.v2/libs/system/build/darwin-4.2.1/release/threading-multi/libboost_system.dylib
common.copy stage/lib/libboost_system.dylib
common.mkdir bin.v2/libs/filesystem
common.mkdir bin.v2/libs/filesystem/build
common.mkdir bin.v2/libs/filesystem/build/darwin-4.2.1
common.mkdir bin.v2/libs/filesystem/build/darwin-4.2.1/release
common.mkdir bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/codecvt_error_category.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/operations.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/path.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/path_traits.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/portability.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/unique_path.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/utf8_codecvt_facet.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/windows_file_codecvt.o
darwin.link.dll bin.v2/libs/filesystem/build/darwin-4.2.1/release/threading-multi/libboost_filesystem.dylib
common.copy stage/lib/libboost_filesystem.dylib
common.mkdir bin.v2/libs/system/build/darwin-4.2.1/release/link-static
common.mkdir bin.v2/libs/system/build/darwin-4.2.1/release/link-static/threading-multi
darwin.compile.c++ bin.v2/libs/system/build/darwin-4.2.1/release/link-static/threading-multi/error_code.o
darwin.archive bin.v2/libs/system/build/darwin-4.2.1/release/link-static/threading-multi/libboost_system.a
common.copy stage/lib/libboost_system.a
common.mkdir bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static
common.mkdir bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/codecvt_error_category.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/operations.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/path.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/path_traits.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/portability.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/unique_path.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/utf8_codecvt_facet.o
darwin.compile.c++ bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/windows_file_codecvt.o
darwin.archive bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/libboost_filesystem.a
/usr/bin/libtool: file: bin.v2/libs/filesystem/build/darwin-4.2.1/release/link-static/threading-multi/windows_file_codecvt.o has no symbols
common.copy stage/lib/libboost_filesystem.a
...updated 46 targets...

The Boost C++ Libraries were successfully built!
The following directory should be added to compiler include paths:

    /Users/sven/devtools/boost_1_53_0

The following directory should be added to linker library paths:

    /Users/sven/devtools/boost_1_53_0/stage/lib
</code></pre>
<p>Yes, there you go: it reads The Boost C++ Libraries were successfully built! :-) And there is also the most important hint:</p>
<blockquote>
<p><em>The following directory should be added to linker library paths:</em>
<em>/Users/sven/devtools/boost_1_53_0/stage/lib</em></p>
</blockquote>
<p>That is nice! I like it when toolsets are that easy to build and use.
One step left. I want to use it with Qt/QtCreator, so add that information to the .PRO file</p>
<pre><code>LIBS += /Users/sven/devtools/boost_1_53_0/stage/lib -lboost_filesystem -lboost_system
INCLUDEPATH += /Users/sven/devtools/boost_1_53_0
</code></pre>
<p>One could think that</p>
<pre><code>LIBS += /Users/sven/devtools/boost_1_53_0/stage/lib
INCLUDEPATH += /Users/sven/devtools/boost_1_53_0
</code></pre>
<p>is enough, but the compiler complains here (hey, I am still a C++ novice).</p>
<p><em>Of course you should use your own path here</em>. That was easy and fast. What are you waiting for? Do it for yourself.</p>
<h1><a class="header" href="#boost-libraries-on-osx---first-obstacles" id="boost-libraries-on-osx---first-obstacles">Boost libraries on OSX - first obstacles</a></h1>
<p>Building the boost/filesystem library was quite easy, using it in a program not so much. It compiled fine but when I started I got</p>
<pre><code>dyld: Library not loaded: libboost_filesystem.dylib
  Referenced from: ___path_to_the_program_I_started___
  Reason: image not found
</code></pre>
<p>It's a dynamic library, which means that I must take care of the application bundle on OSX. When I transfer the application to another Mac that has - certainly - not its own copy of the libraries. But on my own computer?
Let's have a look. Walked in the directory with the <code>.dylib</code> file.</p>
<pre><code>otool -L ./libboost_filesystem.dylib 
./libboost_filesystem.dylib:
	libboost_filesystem.dylib (compatibility version 0.0.0, current version 0.0.0)
	libboost_system.dylib (compatibility version 0.0.0, current version 0.0.0)
	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
</code></pre>
<p>Looks not so bad, there is no absolute path to <code>/usr/somewhere</code> in the library file. But hat also means that the system can not find the library while starting the program. And that brings me back to the <em>&quot;copy them to your application bundle&quot;</em> problem.</p>
<p><a href="http://qin.laya.com/tech_coding_help/dylib_linking.html">No absolute path</a> is not perfect in the OSX world, there is a need for a <code>@executable_path/../Frameworks</code> path in the library. So a compiled program will look in the Frameworks folder, relative from its own position.</p>
<p>Do I really need to recompile the Boost libraries or can I tell QtCreator to do the job for me?
In the Qt helpfiles is a chapter called <em>Qt for Mac OS X - Specific Issues</em> where it reads</p>
<blockquote>
<p>If you want to use some dynamic libraries in your Mac OS X application bundle (the application directory), create a subdirectory named &quot;Frameworks&quot; in the application bundle directory and place your dynamic libraries there. The application will find a dynamic library if it has the install name <code>@executable_path/../Frameworks/libname.dylib</code> (that goes for both, the program binary and the library).
If you use qmake and Makefiles, use the QMAKE_LFLAGS_SONAME setting:</p>
</blockquote>
<blockquote>
<p><code>MAKE_LFLAGS_SONAME  = -Wl,-install_name,@executable_path/../Frameworks/</code></p>
</blockquote>
<p>A quick lookup in the <code>qmake Variable Reference</code> is not very enlightening:</p>
<blockquote>
<p>This variable specifies the link flags to set the name of shared objects, such as .so or .dll. The value of this variable is typically handled by qmake or qmake.conf and rarely needs to be modified.</p>
</blockquote>
<p>The Qt project claims to have a good documentation. Well, I beg to differ. So far every time the tiny bits are missing when it goes into the important details that everyone will come across on the OSX platform or using Qt in general. If you are experienced in using compilers that question may never come up, but for a C++ novice like me it is fundamental. I don't know if the <em>qmake variable</em> is simply a placeholder for a compiler setting. And if it is, I'd like to know <em>that</em> it is that way and <em>where</em> to look for the meaning of it.</p>
<p><em>Lazy solution</em></p>
<p>Removing the <code>*.dylib</code> files from the <code>boost_1_53_0/stage/lib</code> directory forces the linker to use the <code>*.a</code> files and that results in static linking. Easy way out but not a perfect solution. There are libraries that can't be used with static linking and be it just for licensing reasons. <a href="http://qt-project.org/doc/qt-4.8/deployment-mac.html">This article from qt.project.org</a> goes into some of the details. Using the <em>The Mac Deployment Tool</em> will be covered in another post.</p>
<h1><a class="header" href="#pimp-the-clean-process-in-qtcreator" id="pimp-the-clean-process-in-qtcreator">Pimp the clean process in QtCreator</a></h1>
<p>Every now and then you clean your project. What bugged my for some time using QtCreator was that it left the <em>Makefile</em> and the <code>*.app</code> directory containing the (Mac) OSX App(lication).</p>
<p>No problem, just add a <em>Custom Process Step</em>.</p>
<p><img src="./gfx/47.png" alt="" /></p>
<h1><a class="header" href="#handling-the-program-version-with-qt-part-1" id="handling-the-program-version-with-qt-part-1">Handling the program version with Qt, part 1</a></h1>
<p>Usually your program has a version number (e.g. like 1.2.3) and you want to work with that number inside your program without changing that number in more than one file.</p>
<p>With Qt you configure your program with <code>.PRO</code> files which are a recipe for <em>qmake</em> the meta compiler that adds the Qt magic to your code. Both understand a variable called <em>VERSION</em>, that's the sunny part. On the dark side is the handling of it. At least on OSX there is none :-/</p>
<p>But it's quite easy to sneak a peak on that number from inside your program. While we are at it, we also add the <em>git</em> hash.
Just add</p>
<pre><code>VERSION = 1.2.3
macx:HC_GITHASH  = $$system(git show HEAD|grep &quot;^commit&quot;|cut -c 8-)
# define c style macros to access the following values from inside the program
DEFINES += HC_PROGRAMVERSION=\\\&quot;$$VERSION\\\&quot;
DEFINES += HC_GITHASH=\\\&quot;$$HC_GITHASH\\\&quot;
</code></pre>
<p>to your <em>.PRO</em> file and that will result into two <code>#define</code> statements, or C-style macros in other words. Not perfect, because the compiler can't do type checking. On the other hand you're the boss and can handle those two values responsibly.</p>
<p>One question remains: how do we get this number into the application bundle (still talking OSX here), so that the user can right click (or CTRL-click) with the <em>Finder</em> and chose <em>get info</em>?.</p>
<h1><a class="header" href="#handling-the-program-version-with-qt-part-2" id="handling-the-program-version-with-qt-part-2">Handling the program version with Qt, part 2</a></h1>
<p>If you code with Qt and write a GUI application on your Mac (OSX), you will probably add a <code>TEMPLATE = app</code> statement to your <code>.PRO</code> file. This will tell <em>qmake</em> to create an <a href="https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html">application bundle</a> (BTW, I love the concept of application bundles) Oh, isn't that nice? If I add the <code>VERSION</code> variable to my <code>.PRO</code> file than it will be added automatically, right?</p>
<p>Nope!</p>
<p>Would have been too easy.</p>
<p>After reading the <a href="http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html">qmake Variable Reference</a> you may think that <code>QMAKE_INFO_PLIST</code> is your friend (just ignore the awkward humor in <em>Note: Most of the time, the default <code>Info.plist</code> is good enough.</em>). It is, if there wasn't a tiny little <a href="https://bugreports.qt-project.org/browse/QTBUG-21267">bug</a>. Oh, and while we are at bugs, <code>@SHORT_VERSION@</code> is replaced by the first two digits of the program version only (1.2.3 will be 1.2). Ah, the application icon will not be copied, if you use <code>QMAKE_INFO_PLIST</code>, but that was already clear, wasn't it?</p>
<p>So, with</p>
<pre><code># copy our info.plist template and replace variables, see qmake Variable Reference
QMAKE_INFO_PLIST = $$PWD/osx/info.plist
# see https://bugreports.qt-project.org/browse/QTBUG-21267
QMAKE_INFO_PLIST_OUT = $${TARGET}.app/Contents/Info.plist
PRE_TARGETDEPS +=	$${TARGET}.app/Contents/Info.plist
</code></pre>
<p>you will get your own <code>info.plist</code> file copied into the bundle.</p>
<p>Now just add</p>
<pre><code>HC_ICONNAME = name_of_a_beautiful_icon.icns
# does not work, so maybe redundant
ICON = $$PWD/Icons/$${HC_ICONNAME}
# write some extra info in the info.plist
QMAKE_POST_LINK += /usr/libexec/PlistBuddy -c \&quot;Set :GIT_COMMIT_HASH $${HC_GITHASH}\&quot; $${OUT_PWD}/$${TARGET}.app/Contents/Info.plist
# @SHORT_VERSION@ is replaced by the first 2 digits of the version number only. No @TEMPLATE@ for full version available
QMAKE_POST_LINK += ;/usr/libexec/PlistBuddy -c \&quot;Set :CFBundleShortVersionString $${VERSION}\&quot; $${OUT_PWD}/$${TARGET}.app/Contents/Info.plist
# if QMAKE_INFO_PLIST is assigned, the icon is not copied
QMAKE_POST_LINK += ;cp -n $$PWD/Icons/$${HC_ICONNAME} $${OUT_PWD}/$${TARGET}.app/Contents/Resources/.
</code></pre>
<p>to your <code>.PRO</code> file and the <em>git</em> hash (you use <a href="http://git-scm.com/">git</a>, don't you?) is also placed into the <code>info.plist</code> file. Be careful, <code>PlistBuddy</code> is picky and awaits the attribute <code>GIT_COMMIT_HASH</code> in your template <code>info.plist</code>. The program version is added to your bundle, see <code>CFBundleShortVersionString</code>. And finally, the icon is copied.</p>
<p>Didn't I have something better to do on a sunday? Yep, the rest of the sunny afternoon was quality time spent with the family and BBQ!</p>
<p>Did I mention BBQ?</p>
<h1><a class="header" href="#boost-libraries-on-osx---obstacles-almost-gone" id="boost-libraries-on-osx---obstacles-almost-gone">Boost libraries on OSX - obstacles almost gone</a></h1>
<p>A few days ago <a href="./20130331--1.html">I wrote about first obstacles</a> on using the Boost library in a Qt program. To be more specific, the dynamic libraries were not found from the executable. With a fairly crude hack I convinced the linker to just use the static ones. Problem solved.</p>
<p><em>Not</em> really.</p>
<p>Basically it's &quot;where to find the libraries?&quot;. If you just would place the compiled Boost libraries in the same directory as the executable it would work just fine.</p>
<p>Let's have a look at a binary, I chose SolMan here, my very first Qt project. It's kind of a code lab: a place to learn C++ and about the Qt framework. Never mind, we are talking libraries here:</p>
<pre><code>sylimikro:~ sven$ otool -L SolMan.app/Contents/MacOS/SolMan
	/SolMan.app/Contents/MacOS/:
	/System/Library/Frameworks/ScriptingBridge.framework/Versions/A/ScriptingBridge (compatibility version 1.0.0, current version 1.0.0)
	/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1138.51.0)
	/Users/sven/devtools/taglib-bin/lib/libtag.1.dylib (compatibility version 1.0.0, current version 1.12.0)
	libboost_filesystem.dylib (compatibility version 0.0.0, current version 0.0.0)
	libboost_system.dylib (compatibility version 0.0.0, current version 0.0.0)
	QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.4)
	QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.4)
	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1094.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.21.0)
	/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 833.25.0)
	/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)
</code></pre>
<p>This tells us, that some libraries are looked for at well defined paths, e.g. <code>/usr/lib/libobjc.A.dylib</code>. This is no problem because that library is <em>just at exactly that place</em> on any Mac system (Ok, let's say &gt;= OSX 10.6, don't know older versions) out there. So looking out for the library in <code>/usr/lib/</code> will work just fine. But something like the Boost libraries is not on every Mac. Have a close look at those two lines here:</p>
<pre><code>libboost_filesystem.dylib (compatibility version 0.0.0, current version 0.0.0)
libboost_system.dylib (compatibility version 0.0.0, current version 0.0.0)
</code></pre>
<p>There is not path in here.
No path could mean same path, let's try that one. Just copy the two library files to the same directory as the executable.</p>
<p><img src="./gfx/48.png" alt="" /></p>
<p>Start the program and - ah - it works. Ok, problem solved. <em>Again</em>.</p>
<p><em>Nope</em></p>
<p>Dynamic libraries simply don't belong there on a Mac, have a look at the <a href="http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html">Apple - Bundle Programming Guide</a> or at <a href="http://qt-project.org/doc/qt-4.8/deployment-mac.html">Qt - Deploying an Application on Mac OS X</a> if you prefer a more visual approach.</p>
<p>But if you just create that <code>Framworks</code> directory and put the library files there, your program can not start anymore. The libraries will not be found - <em>again</em>.</p>
<p>Ok, now we will try to change the information where the dynamic loader looks for the library.</p>
<pre><code>install_name_tool -change &quot;libboost_filesystem.dylib&quot; &quot;@executable_path/../Frameworks/libboost_filesystem.dylib&quot;  SolMan.app/Contents/MacOS/SolMan
install_name_tool -change &quot;libboost_system.dylib&quot; &quot;@executable_path/../Frameworks/libboost_system.dylib&quot; SolMan.app/Contents/MacOS/SolMan
</code></pre>
<p>Interesting enough, starting the app now results in a new error message:</p>
<pre><code>sylimikro:~ sven$ /Users/sven/Documents/QtProjects/SolMan-build-Desktop-Debug/SolMan.app/Contents/MacOS/SolMan ; exit;
dyld: Library not loaded: libboost_system.dylib
  Referenced from: /Users/sven/Documents/QtProjects/SolMan-build-Desktop-Debug/SolMan.app/Contents/MacOS/../Frameworks/libboost_filesystem.dylib
  Reason: image not found
Trace/BPT trap: 5
logout
[Process completed]
</code></pre>
<p>Hm...looks like he found the first library but can't find the second one that depends from the first. I guess you notice that I am trying a lot of things here with no fundamental knowledge of how it should be. That is exactly the problem: there are so many articles and blogs about the solution of this problem that are contradictory, exclude each other or just do not tell the whole truth. After I have discovered what seems to be the right way to handle this, I will try to find evidence that my conclusion is right.
Our binary would know where to look for the second dependent library. But it seems that the dynamic loader does his job recursively and the way from <code>libboost_filesystem.dylib</code> to <code>libboost_system.dylib</code> seems not to be clear.</p>
<p>Let's manipulate the entry in <code>libboost_filesystem.dylib</code>.</p>
<pre><code>install_name_tool -change &quot;libboost_system.dylib&quot; &quot;@executable_path/../Frameworks/libboost_system.dylib&quot; SolMan.app/Contents/Frameworks/libboost_filesystem.dylib
</code></pre>
<p>Run the application...heureka!</p>
<p>Many blogs talked about changing even the name/path of the library itself. This seems to be obsolete. Nevertheless I am gonna try what happens if we also change this value:</p>
<pre><code>install_name_tool  -id &quot;@executable_path/../Frameworks/libboost_filesystem.dylib&quot; SolMan.app/Contents/Frameworks/libboost_filesystem.dylib
</code></pre>
<p>Note that we must use another switch for the <code>install_name_tool</code> command. This is still working and more consistant in my eyes. Maybe we could even change the <code>ID</code> in the dependent library:</p>
<pre><code>install_name_tool -id &quot;@executable_path/../Frameworks/libboost_system.dylib&quot; SolMan.app/Contents/Frameworks/libboost_system.dylib
</code></pre>
<p>Even that works. Is <em>this</em> the right way to go? What is an <code>@rpath</code>? and what's the difference to <code>@executable_path</code>? <a href="https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/RunpathDependentLibraries.html#//apple_ref/doc/uid/TP40008306-SW1">Apple can enlighten us here</a> :</p>
<blockquote>
<p>A run-path dependent library is a dependent library whose complete install name is not known when the library is created (see “How Dynamic Libraries Are Used”). Instead, the library specifies that the dynamic loader must resolve the library’s install name when it loads the executable that depends on the library.</p>
</blockquote>
<p>That's not what we need, <code>@rpath</code> is out.</p>
<p><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/OverviewOfDynamicLibraries.html#//apple_ref/doc/uid/TP40002013-SW21">This here is a good explanation</a> and a hint that I am not totally wrong.</p>
<p><em>BUT</em></p>
<p>Here they say</p>
<blockquote>
<p>Library-relative location. To specify a file path relative to the location of the library itself, place the @loader_path macro at the beginning of the pathname. Library-relative location allows you to locate library resources within a directory hierarchy regardless of where the main executable is located.</p>
</blockquote>
<p>Oops. Next try...</p>
<pre><code>install_name_tool -change &quot;@executable_path/../Frameworks/libboost_system.dylib&quot; &quot;@loader_path/libboost_system.dylib&quot; SolMan.app/Contents/Frameworks/libboost_filesystem.dylib
</code></pre>
<p>This works, too! And <em>this</em> is <em><em>finally</em></em> the most promising version of handling the paths of executable and it's dynamic libraries.</p>
<p>Now we know where the bits and pieces have to go. In one of the next blogs I will try to make this a more consistent and automated process.</p>
<h1><a class="header" href="#using-the-boost-libraries-with-qtcreator-on-osx" id="using-the-boost-libraries-with-qtcreator-on-osx">Using the Boost libraries with QtCreator on OSX</a></h1>
<p>Now that we know where the libraries have to go and how the executable and each library must be prepared, so that everything works together. The problem is here that I certainly don't want to do those necessary steps by hand. On the other hand I ask myself if there is really a need to change the information in the libraries itself? How to put all that together in the application bundle in a way that works smooth with QtCreator?
First thing I will try is linking the application in way that the path information AKA <code>@executable_path/../Frameworks</code> is already in the binary, so that I don't need to fiddle around with <code>install_name_tool</code> after each new compile/link process. Last time I saw</p>
<pre><code>QMAKE_LFLAGS_SONAME  = -Wl,-install_name,@executable_path/../Frameworks/
</code></pre>
<p>I didn't know what that was all about. All compiled code pieces are glued together from the <em>linker</em>, hence this could be a linker option. I read the <code>qmake Variable Reference</code> again</p>
<blockquote>
<p>This variable specifies the <em>link</em> flags to set the name of shared objects, such as .so or .dll. The value of this variable is typically handled by qmake or qmake.conf and rarely needs to be modified.</p>
</blockquote>
<p>This time I didn't miss it. <em>Link</em> is the hint. Let's look in the man page of <code>ld</code> (the linker).</p>
<pre><code>-install_name name
    	Sets an internal &quot;install path&quot; (LC_ID_DYLIB) in a dynamic library. Any clients linked
        against the library will record that path as the way dyld should locate this library.  If
        this option is not specified, then the -o path will be used.  This option is also called
        -dylib_install_name for compatibility.
</code></pre>
<p>No talking about <code>-Wl</code> in the man page. Maybe that goes for other linkers and/or other operating systems. (<em>Update</em>: in the meanwhile I've learned that this is a compiler flag for linker options)</p>
<p>I've decided to add</p>
<pre><code>QMAKE_LFLAGS_SONAME  = -install_name,@executable_path/../Frameworks/
</code></pre>
<p>and ran <code>qmake</code> and look into the produced <code>Makefile</code>.
First thing I notice is</p>
<pre><code>LFLAGS = -headerpad_max_install_names -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5
</code></pre>
<p><code>-headerpad_max_install_names</code> is used, that way everything is compiled with enough space in the files to change the path information with <code>install_name_tool</code> afterwards.</p>
<p>Here is the call of the linker:</p>
<pre><code>$(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)
</code></pre>
<p>Apparently there is no way to get the <code>QMAKE_LFLAGS_SONAME</code> variable working. Maybe I am doing it wrong or it is <em>just</em> a bug. That's something I'm going to ask the Qt-Project soon.</p>
<p>For every library with a valid <em>install_name</em> you can use <code>macdeployqt</code>. It does all the needed steps.</p>
<pre><code>QMAKE_POST_LINK += ;/Developer/Tools/Qt/macdeployqt $${OUT_PWD}/$${TARGET}.app -no-strip
</code></pre>
<p>On the positive side is the (intentional) handling of all dependent libraries, that means every library our new executable depends on is copied to the <code>Frameworks</code> directory and the <code>install_name</code> is corrected in the library and in the executable. That includes the Qt libraries, this way the application bundle can be transferred to another Mac without having Qt installed. Perfect!
<em>But</em> it also stumbles on an invalid <em>install_name</em>, so we have to prepend some stuff to copy the prepared boost libraries and do the adjustments with the <em>install_name</em>.</p>
<pre><code>QMAKE_POST_LINK += ;cp -n $${PWD}/osx/libboost_filesystem.dylib $${OUT_PWD}/$${TARGET}.app/Contents/Frameworks/
QMAKE_POST_LINK += ;cp -n $${PWD}/osx/libboost_system.dylib $${OUT_PWD}/$${TARGET}.app/Contents/Frameworks/
QMAKE_POST_LINK += ;/usr/bin/install_name_tool -change \&quot;libboost_filesystem.dylib\&quot; \&quot;@executable_path/../Frameworks/libboost_filesystem.dylib\&quot; $${OUT_PWD}/$${TARGET}.app/Contents/MacOS/$${TARGET}
QMAKE_POST_LINK += ;/usr/bin/install_name_tool -change \&quot;libboost_system.dylib\&quot; \&quot;@executable_path/../Frameworks/libboost_system.dylib\&quot; $${OUT_PWD}/$${TARGET}.app/Contents/MacOS/$${TARGET}
</code></pre>
<p>In retrospective it seems easier to put change the <em>install_name</em> of the Boost libraries and also use the <code>macdeployqt</code> tool. Perfect would be a way to compile the Boost libraries in a way that doesn't need any work afterwards. Future will tell...</p>
<h1><a class="header" href="#boost-libraries-and-qtcreator-on-osx---all-together-now" id="boost-libraries-and-qtcreator-on-osx---all-together-now">Boost libraries and QtCreator on OSX - all together now</a></h1>
<p>After <a href="./20130329--1.html">first contact</a> with the Boost libraries I faced <a href="./20130331--1.html">first obstacles</a>, <a href="./20130418--1.html">sorted them out</a> and tried to <a href="./20130421--1.html">use them with QtCreator</a>. Upon subsequent reading some mails and forum entries this problem is not uncommon, but nobody provided a solution. So I used this journey to figure it out on my own.</p>
<p>Here is a follow up with the concentrated insight.</p>
<ol>
<li>prepare the build process (this time all libraries)</li>
</ol>
<pre><code>export build=~/devtools # or wherever you'd like to build
cd $build/boost_1_53_0
# remove traces from the last time
./b2 --clean-all
rm project-config.jam*
# prepare
./bootstrap.sh
#output
-n Building Boost.Build engine with toolset darwin... 
tools/build/v2/engine/bin.macosxx86_64/b2
-n Detecting Python version... 
2.7
-n Detecting Python root... 
/System/Library/Frameworks/Python.framework/Versions/2.7
-n Unicode/ICU support for Boost.Regex?... 
not found.
Generating Boost.Build configuration in project-config.jam...
Bootstrapping is done. To build, run:
    ./b2
To adjust configuration, edit 'project-config.jam'.
Further information:
   - Command line help:
     ./b2 --help
   - Getting started guide: 
     http://www.boost.org/more/getting_started/unix-variants.html
   - Boost.Build documentation:
     http://www.boost.org/boost-build2/doc/html/index.html
</code></pre>
<ol start="2">
<li>build</li>
</ol>
<pre><code>./b2
#output
Building the Boost C++ Libraries.
Performing configuration checks
    - 32-bit                   : no
    - 64-bit                   : yes
    - x86                      : yes
    - has_icu builds           : no
warning: Graph library does not contain MPI-based parallel components.
note: to enable them, add &quot;using mpi ;&quot; to your user-config.jam
    - iconv (libc)             : no
    - iconv (separate)         : yes
    - icu                      : no
    - icu (lib64)              : no
    - gcc visibility           : yes
    - long double support      : yes
warning: skipping optional Message Passing Interface (MPI) library.
note: to enable MPI support, add &quot;using mpi ;&quot; to user-config.jam.
note: to suppress this message, pass &quot;--without-mpi&quot; to bjam.
note: otherwise, you can safely ignore this message.
Component configuration:
    - atomic                   : building
    - chrono                   : building
    - context                  : building
    - date_time                : building
    - exception                : building
    - filesystem               : building
    - graph                    : building
    - graph_parallel           : building
    - iostreams                : building
    - locale                   : building
    - math                     : building
    - mpi                      : building
    - program_options          : building
    - python                   : building
    - random                   : building
    - regex                    : building
    - serialization            : building
    - signals                  : building
    - system                   : building
    - test                     : building
    - thread                   : building
    - timer                    : building
    - wave                     : building
# many, many lines of comments
# felt like 5 minutes compile time
...updated 748 targets...
The Boost C++ Libraries were successfully built!
The following directory should be added to compiler include paths:
    /Users/sven/devtools/boost_1_53_0
The following directory should be added to linker library paths:
    /Users/sven/devtools/boost_1_53_0/stage/lib
</code></pre>
<ol start="3">
<li>Change the <code>install_name</code> in all libraries</li>
</ol>
<pre><code>cd $build/boost_1_53_0/stage/lib
for DYNLIB in $(ls libboost*.dylib);do install_name_tool -id &quot;$(pwd)/${DYNLIB}&quot; &quot;$(pwd)/${DYNLIB}&quot;;done
for OUTER in $(ls libboost*.dylib);do for INNER in $(ls libboost*.dylib);do install_name_tool -change &quot;${INNER}&quot; &quot;@loader_path/${INNER}&quot; ${OUTER};done;done
</code></pre>
<ol start="4">
<li>check one of them</li>
</ol>
<pre><code>otool -L $build/boost_1_53_0/stage/lib/libboost_filesystem.dylib /Users/sven/devtools/boost_1_53_0/stage/lib/libboost_filesystem.dylib:
	/Users/sven/devtools/boost_1_53_0/stage/lib/libboost_filesystem.dylib (compatibility version 0.0.0, current version 0.0.0)
	@loader_path/libboost_system.dylib (compatibility version 0.0.0, current version 0.0.0)
	/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
</code></pre>
<ol start="5">
<li>configure usage in <code>.PRO</code> file of QtCreator</li>
</ol>
<pre><code>QMAKE_POST_LINK += ;/Developer/Tools/Qt/macdeployqt $${OUT_PWD}/$${TARGET}.app -no-strip
</code></pre>
<p>Done :-)</p>
<h1><a class="header" href="#welcome-aboard-sailor" id="welcome-aboard-sailor">Welcome aboard sailor!</a></h1>
<p>Today is the day: #JollaLoveDay</p>
<p>Jolla mobile will unveil its first device today. Go to their <a href="https://join.jolla.com/en">website</a>, look at the first pictures and throw your money at them!</p>
<p><img src="./gfx/50.jpg" alt="" /></p>
<p>What shall I say? I've just pre-ordered:</p>
<p><img src="./gfx/49.jpg" alt="" /></p>
<h1><a class="header" href="#why-i-believe-in-jolla" id="why-i-believe-in-jolla">Why I believe in Jolla</a></h1>
<p><img src="./gfx/51.jpg" alt="" /></p>
<p>It was last year during the summer holidays that I've read about Jolla. My girlfriend and I stayed in a mökki (=cottage) almost 40km away from Tampere - Finland. The only hi-tech gizmo we took to that place, was an iPad. Quite useful to checkout where the next stores are and it saves your holiday, because the iPad is a pure consumer product only: you are safe from doing anything productive (pun intended).</p>
<p>BTW: if you ever wondered how they calculate battery duration times for mobile phones, they test that in Finland -  wherever you go, you got prefect reception. OK, I am exaggerating here but compared to the mobile networks in Germany it is paradise. Watching Youtube videos in full scale the whole day here in Germany? Impossible!</p>
<p>And there was some news about some ex-Nokia employees that wanted to continue their vision of a Linux based and open phone/OS. I quickly read all that could be found in the internet those days - and that was not very much back then.</p>
<p>Just before the holidays I tested my two Applications in the Apple App Store with the beta version of iOS6 and well, knew that <a href="./20120922--1.html">this would become a road to nowhere pretty soon</a>.</p>
<p>I was very unhappy about the way a company like Apple communicates with customers and developers (if at all), that I was forced to pay money each and every year just to write and run some software on my own device. Don't get me wrong, there were positive trade offs here: I learned a lot about interface design that influences my work until now: even on Desktops your interfaces improve if you ever experienced the limitations of a pocket touch device.</p>
<p>Developing for Android phones could have been an alternative but I dislike the upgrade situation. You can't be sure to get the next version of the Android OS for your phone. And I am certainly not the guy that buys a new phone every year. <em>(Update: FirefoxOS is in my eyes a wrong approach. Why use a resource hungry browser for a low energy device?)</em></p>
<p>So there they were: a pack of misfits that promised exactly what I wanted: a touch based phone with a free and open OS and a fluent UI. They came from Nokia and therefore had the knowledge to get the job done. The N9 was proof of that. Sadly the N9 was a dead product from day one, since Stephen Elop <a href="http://www.mobile-ent.biz/news/read/nokia-ceo-stephen-elop-s-burning-platform-memo-leaks-in-full/013207">burned the platform</a>.</p>
<p>The OS would have an UI based on <a href="http://qt-project.org/">Qt</a> or <a href="http://qt-project.org/doc/qt-4.8/gettingstartedqml.html">QML</a> to be more precise. I've had heard a lot about Qt but never used it before. Frustrated by the limitations of one manufacture/platform, it seemed reasonable to dig a bit deeper.</p>
<p>How hard would it be to learn C++ and make the first steps with the Qt framework?</p>
<p>I watched a lot of videos and tutorials during that holiday and after we came back I decided &quot;on to pastures new&quot;.</p>
<p><img src="./gfx/24.jpg" alt="" /></p>
<p>From there on I soaked up every news about Jolla and started learning C++/Qt. The latter two turned out to be a bit harder than expected but that will be explained in another blog post sometime.</p>
<p><em>Jump to may, 20th 2013 and beyond.</em></p>
<p>Short after #JollaLoveDay some critical opinions came up, <a href="http://jollatides.com/2013/05/22/pre-order-constructive-critique">one of them is here</a>. First of all: that one was retweeted by Jolla, so no brushing under the carpet going on here. I give kudos to Jolla for that. Imagine something like that from the big players like Microsoft, Google or even Apple...</p>
<p>While I can understand the critics I am still convinced from Jolla. Today even more than ever before. I simply want to believe. Ok, that claim is already taken - Blackberry knew their X-files.</p>
<p>But why do I believe?</p>
<p>Because they believe in themselves! They seem like a bunch of underdogs and from the perspective of market share and financial success they certainly are. But I like underdogs and besides that they are not. Those are the same people that made up MeeGo (and all its other name iterations) and the N9 (yes, I repeat myself here). They convinced some venture capitalists and that alone is proof enough for me.</p>
<p>Of course there is still a risk. Isn't there always a risk in life? Wouldn't it be boring without? And if they succeed, not only will they have the success they deserve, no - I will get something, too:
the smartphone of my dreams.</p>
<p>Of course it would be nice to know more specs of the phone but on the other hand Jolla/Sailfish is not about specs. They made that very clear since day one. The competitors have stopped inventing new ideas and started the spec war some time ago. How do I benefit from 4 instead of 2 cores? Battery life goes down, thank you. SailfishOS is smooth on old hardware, no core porn needed here.
Yes, for some people a QWERTY would have been nice. But when did you ever think that this would be priority one for Jolla? They always showed pure touch devices and the majority of people seem to like that. Or why else are the touch devices more successful? And one thing is for sure: Jolla has only got one shot and that must be a strike. Not in the sense that they overtake the big players, no - it simply means they must be able to pay their bills and collect enough money to continue. Chances are much higher with a touch device.
And I also like to know some details about #theotherhalf. Who does not? Jolla would simply be mad to tell the world any details before they can ship. The rivals may not fear Jolla right now but they certainly have an eye on them: and be it just for getting new ideas. Jolla would be of the rocker! Why should they serve their ideas on a silver platter and risk that a copycat hits the market first? And maybe there will be #theotherhalf with a QUERTY as accessory one day.</p>
<p>Yes, I believe in them. And one way to show that is to <a href="https://join.jolla.com/en">preorder</a> the device even without knowing any details. Whatever #theotherhalf will be, it will certainly be special. Let them just surprise me.</p>
<p>In the end I will pay the same price as anybody else, so no extra costs here for me. But a bit of support from me for Jolla to show them my love and believe.</p>
<p>So what's the risk? Jolla will declare bankruptcy before sending the device to me.
Well, then call me an (ad)venture-capitalist, too.</p>
<p><strong>I took the risk!</strong></p>
<p><img src="./gfx/49.jpg" alt="" /></p>
<p><img src="http://jollafr.org/gif/jolla.gif" alt="" /></p>
<h1><a class="header" href="#boost-up-again" id="boost-up-again">Boost up again</a></h1>
<p>If you want to create (Qt) C++11 projects and use the Boost Library you will probably notice that it is very convenient if the Boost libraries are also compiled with C++11. I needed just the Filesystem library, so here it goes in short form (compiled with clang on OSX 10.7.5):</p>
<pre><code>$ export build=~/devtools
$ cd $build/boost_1_53_0_cpp11/
$ ./b2 --clean-all
$ rm project-config.jam*
$ ./bootstrap.sh --with-toolset=clang --with-libraries=filesystem
$ ./b2 cxxflags=&quot;-stdlib=libc++&quot; linkflags=&quot;-stdlib=libc++&quot;
$ cd $build/boost_1_53_0_cpp11/stage/lib
$ for DYNLIB in $(ls libboost*.dylib);do install_name_tool -id &quot;$(pwd)/${DYNLIB}&quot; &quot;$(pwd)/${DYNLIB}&quot;;done
$ for OUTER in $(ls libboost*.dylib);do for INNER in $(ls libboost*.dylib);do install_name_tool -change &quot;${INNER}&quot; &quot;@loader_path/${INNER}&quot; ${OUTER};done;done
</code></pre>
<h1><a class="header" href="#powershell---get-active-directory-user-accounts-with-no-employee-number-set" id="powershell---get-active-directory-user-accounts-with-no-employee-number-set">Powershell - get Active Directory User accounts with no employee number set</a></h1>
<p>Ever wanted to query your Active Directory for users with an empty <em>employeeNumber</em> attribute that start with a certain <em>PATTERN</em> and do not end on letters?</p>
<p>Here you go:</p>
<pre><code>Import-Module QADModule
$MAX_AD_OBJECTS_LIMIT = 3000
$missingusers = Get-QADUser -SamAccountName PATTERN* -IncludedProperties &quot;employeeNumber&quot; -SizeLimit $MAX_AD_OBJECTS_LIMIT|
    Where-Object {$_.SamAccountName -notlike &quot;PATTERN[a-z]*&quot; -and $_.employeeNumber -eq $null}
&quot;#Users with empty employee number: &quot; + $missingusers.Count
$missingusers|select-object -property SamAccountName, sn, givenName, Description | Out-GridView
</code></pre>
<p>Ah - and I use the <a href="http://www.quest.com/powershell/activeroles-server.aspx">Quest Active Directory module for Powershell</a>.</p>
<h1><a class="header" href="#inside-the-belly-of-the-beast" id="inside-the-belly-of-the-beast">Inside the belly of the beast</a></h1>
<p>Some time ago I've <a href="./20120817--1.html">indicated</a> that I will eventually learn C++ and dive into the Qt framework. Just a few weeks ago I've showed my <a href="./20130527--1.html">love for Jolla</a> and mentioned that learning C++ turned out quite a bit harder as expected. Let's throw in a #jolla2gether for no apparent reason :-)</p>
<p><em>Why is that</em>?</p>
<p>The answer to that is the subject of this blog post.</p>
<p><em>Why C++ and Qt?</em></p>
<p>At work we have a 99.9% Microsoft environment and thus it makes sense to develop in .NET/C#. And I'd say that this is probably good enough for 95% of all GUI applications. C# is easy to learn, the .NET framework is huge and provides classes and methods for almost any aspect of a Windows machine.</p>
<p>Performance is no problem at all, if it's done right and if we are talking visual tools/programs for desktop or terminalserver. Development is straight forward and many, many tools are available. I even prefer <a href="http://www.icsharpcode.net/">SharpDevelop</a> over Visual Studio (2012).</p>
<p>Some time ago I've learned Objective-C, so that I could code for Mac and/or iOS. If these two are your primary targets platforms, you probably should learn Objective-C. I'm really not an Apple fanboy but the API and documentation is the best that I've seen so far. And yet it's not perfect, just to make that clear.</p>
<p>C# is Microsoft only (yes, there is something like <a href="http://www.mono-project.com/Main_Page">Mono</a>, but hey - come on - seriously?) and I tend to dislike the politics of Apple.</p>
<p>The next technology I wanted to learn should be more or less platform independent, bring performance on mobile devices and it should have a GUI. Don't get me wrong, I like the command line but I prefer a GUI for daily tasks. Of course one could read his email via <em>bash</em> and <em>mutt</em> but why?</p>
<p>That was the moment I remembered reading about <a href="http://qt-project.org/">Qt</a> and on first sight this would enable me to develop for Windows, OSX and even many tastes of Linux. There were first signs of iOS support and <a href="http://jolla.com/">Jolla</a> will have a GUI based on Qt. Go for Qt makes a lot of sense. </p>
<p>How hard could it be to learn C++?</p>
<p>So the journey started.</p>
<p>If you start learning C++ with Qt together, the first steps are as easy as pie. Qt provides a large framework and the young Padawan can dive in with a small subset of C++. On one hand side that seems to be a good thing, keeping the learning curve flat. Qt has many features that enabled the C++98 developer to achieve things that now are available within C++11. Clean code for day one on is no problem at all. On the other hand this keeps you away from the standard library and the &quot;built-in&quot; features of C++/libstdc++. The ones who learned C++ first and Qt afterwards were probably in a better position because they could see the benefits of using Qt and they knew what feature of the standard library was replaced or complemented by a (feature) richer component. More then eight months later I am still not sure if it was a good decision to learn both together.</p>
<p><em>Conclusion</em></p>
<p>I've learned a lot in those eight months, discovered so many things I still don't know and want to learn. C++ can (not must) be a complex beast and alone that makes it an interesting science project.</p>
<p>No regrets, still looking forward :-)</p>
<h1><a class="header" href="#cloning-the-qt-git-repository-into-a-corporate-environment" id="cloning-the-qt-git-repository-into-a-corporate-environment">Cloning the Qt git repository into a corporate environment</a></h1>
<p>Let's assume you work inside a bigger company and want to clone the Qt git repository (or any other), there is a firewall and internet access via proxy only. Nothing out of the ordinary here and let's further assume that your company uses Windows workstations.</p>
<p>First thing needed is <a href="http://git-scm.com/">Git for Windows</a>.
Download. Install.</p>
<p>On Windows you get the <em>Git Bash</em>, a Unix like shell. Fire that up. You should end (or start) in you user directory. Set a Git property to use your proxy and clone the repository via HTTPS:</p>
<pre><code>$ git config --global http.proxy YOURCOMPANYPROXYNAME:PROXYPORT
$ git clone https://git.gitorious.org/qt/qt5.git
</code></pre>
<p>Now learn that the perl version inside <em>Git Bash</em> is outdated:</p>
<pre><code>$ cd qt5
$ ./init-repository -help
&quot;GetOptionsFromArray&quot; is not exported by the Getopt::Long module
Can't continue after import errors at ./init-repository line 203
BEGIN failed--compilation aborted at ./init-repository line 203.
</code></pre>
<p>Download <a href="http://www.activestate.com/activeperl/downloads">Active Perl</a>, install it.</p>
<p>Use this perl version and learn that you have no certificates installed (the <em>-f</em> is used to force the initialization of the repository, because the last try has left some information on disk).</p>
<pre><code>$ /c/Perl64/bin/perl ./init-repository -f --http
# cut most lines
+ git fetch https://git.gitorious.org/qt/qtactiveqt.git
fatal: unable to access 'https://git.gitorious.org/qt/qtactiveqt.git/': SSL certificate problem: unable to get local issuer certificate
</code></pre>
<p>Be lazy, ignore security and fetch anyway:</p>
<pre><code>$ env GIT_SSL_NO_VERIFY=true /c/Perl64/bin/perl ./init-repository -f --http
</code></pre>
<p>There you go.</p>
<p><em>You want some more...</em></p>
<p>If you also want to contribute and push your changes to Gerrit, you need some more:</p>
<p>Configure your <a href="http://qt-project.org/wiki/Setting-up-Gerrit">Gerrit account</a>, see <em>Log in with your public JIRA credentials</em>.
Start the <em>Git Bash</em>.</p>
<pre><code>$ mkdir .ssh
$ cd .ssh
$ vi config
</code></pre>
<p>add the information for the Qt repository:</p>
<pre><code>Host codereview.qt-project.org
ProxyCommand ncat --proxy YOURCOMPANYPROXYNAME:PROXYPORT  --proxy-type http %h %p
ServerAliveInterval 10
HostName ssh.qt-project.org
Port 443
User YOURGERRITUSERNAME
</code></pre>
<p>Replace the uppercase entries with the values for your account and the company's proxy.</p>
<p>On Unix systems you would probably see a <em>nc</em> command to connect via proxy. This is not part of windows and does (sadly) not come with the <em>Git Bash</em>. There is an alternative:
Donwload <a href="http://nmap.org/ncat/">ncat for Windows</a>, install it and add the installation directory to your <code>PATH</code> environment variable. While you're on your way, <em>nmap</em> is worth beeing added to your toolchain, too.</p>
<p>Cloning should be now possible via ssh:</p>
<pre><code>$ git clone ssh://YOURGERRITUSERNAME@codereview.qt-project.org/qt/qtbase.git
</code></pre>
<p>So, you're able to tunnel the ssh connection, the rest should work just fine.</p>
<h1><a class="header" href="#howto-git" id="howto-git">Howto Git?!</a></h1>
<p>You use <a href="http://git-scm.com/">Git</a>, don't you?</p>
<p>No?</p>
<p>No more excuses, <a href="http://pcottle.github.io/learnGitBranching">learn how it works here</a>. Fantastic online course!</p>
<h1><a class="header" href="#20130707--timemachine-and-encrypted-volumes---no-paste-possible---data-save-as-in-a-vault" id="20130707--timemachine-and-encrypted-volumes---no-paste-possible---data-save-as-in-a-vault">20130707  Timemachine and encrypted volumes - no paste possible - data save as in a vault</a></h1>
<p>You use Time Machine, don't you? Was it ever easier to get an automatic backup that just works, once it is configured? And what is there to configure? That you want a) to use it and b) on which disk. Ok, you can choose some exceptions of directories/devices that should not be backup up, but that's pretty much it. Ah and there is this little checkbox that says <em>Encrypt backups</em>. Maybe you carry around your backup disk and just what to prevent a possible thief to read your data, maybe you are just paranoid.
Maybe I am both, I checked this little box and entered a password.</p>
<p>Fire and forget. <em>Ok, it took quite some time to encrypt the whole disk</em></p>
<p>Until...</p>
<p>... I attached the backupdisk to my computer again and this little dialog popped up (I first had a typo and the dialog pooped up, haha):</p>
<p><img src="./gfx/52.jpg" alt="" /></p>
<p>Funny - why didn't this damn machine remember the password?. There is even a checkbox that says <em>remember in keychain</em>. No problem sir, just start my password tool, copy the password and paste it in.</p>
<p><em>beeeeeep</em></p>
<p><em>Not!</em></p>
<p>You just can't paste into that textbox (OSX Mountain Lion it is, I don't have other versions at hand). That would not be much of a problem if I didn't decide to use a 64 character long password, chosen by my password tool. <em>To make that clear: the dialog where I entered the password for the first time was able to accept a pasted password</em> . So much for the paranoia part. The <em>Disk Utility</em> didn't help neither. There came the same popup.</p>
<p>Well, thanks but no thanks. Is all (pretty damn safe) data lost now?  I could simply start from scratch, but I would loose my backup history.</p>
<p>But there comes help from the command line. Start up your terminal and look for your volume ID:</p>
<pre><code>$ diskutil corestorage list
CoreStorage logical volume groups (2 found)
|
+-- Logical Volume Group FEDCBE98-EEEE-BBBB-DDDD-1234567890AB
|   =========================================================
|   Name:         Macintosh HD
|   Status:       Online
|   Size:         319213174784 B (319.2 GB)
|   Free Space:   0 B (0 B)
|   |
|   +-&lt; Physical Volume 00000000-EEEE-BBBB-DDDD-222222222222
|   |   ----------------------------------------------------
|   |   Index:    0
|   |   Disk:     disk0s2
|   |   Status:   Online
|   |   Size:     319213174784 B (319.2 GB)
|   |
|   +-&gt; Logical Volume Family 11111111-AAAA-BBBB-EEEE-333333333333
|       ----------------------------------------------------------
|       Encryption Status:       Unlocked
|       Encryption Type:         AES-XTS
|       Conversion Status:       Complete
|       Conversion Direction:    -none-
|       Has Encrypted Extents:   Yes
|       Fully Secure:            Yes
|       Passphrase Required:     Yes
|       |
|       +-&gt; Logical Volume 33333333-AAAA-BBBB-FFFF-444444444444
|           ---------------------------------------------------
|           Disk:               disk1
|           Status:             Online
|           Size (Total):       318894403584 B (318.9 GB)
|           Size (Converted):   -none-
|           Revertible:         Yes (unlock and decryption required)
|           LV Name:            Macintosh HD
|           Volume Name:        Macintosh HD
|           Content Hint:       Apple_HFS
|
+-- Logical Volume Group 44444444-FFFF-BBBB-EEEE-555555555555
    =========================================================
    Name:         Timemachine
    Status:       Online
    Size:         499061317632 B (499.1 GB)
    Free Space:   16777216 B (16.8 MB)
    |
    +-&lt; Physical Volume 55555555-EEEE-CCCC-DDDD-666666666666
    |   ----------------------------------------------------
    |   Index:    0
    |   Disk:     disk2s2
    |   Status:   Online
    |   Size:     499061317632 B (499.1 GB)
    |
    +-&gt; Logical Volume Family 66666666-EEEE-CCCC-DDDD-777777777777
        ----------------------------------------------------------
        Encryption Status:       Locked
        Encryption Type:         AES-XTS
        Conversion Status:       Complete
        Conversion Direction:    -none-
        Has Encrypted Extents:   Yes
        Fully Secure:            Yes
        Passphrase Required:     Yes
        |
        +-&gt; Logical Volume 12345678-AAAA-BBBB-CCCC-00DEADBEEF11
            ---------------------------------------------------
            Disk:               -none-
            Status:             Locked
            Size (Total):       498725769216 B (498.7 GB)
            Size (Converted):   -none-
            Revertible:         Yes (unlock and decryption required)
            LV Name:            Timemachine
            Content Hint:       Apple_HFS
</code></pre>
<p>There it is, a logical volume with the name <em>Timemachine</em> and much more important, its ID:
<em>12345678-AAAA-BBBB-CCCC-00DEADBEEF11</em>.
We need that to unlock the volume:</p>
<pre><code>$ diskutil corestorage unlockVolume 12345678-AAAA-BBBB-CCCC-00DEADBEEF11 -stdinpassphrase
Passphrase:
Started CoreStorage operation
Logical Volume successfully unlocked
Logical Volume successfully attached as disk3
Logical Volume successfully mounted as /Volumes/Timemachine
Core Storage disk: disk3
Finished CoreStorage operation
</code></pre>
<p>Just <em>paste</em> your password into the terminal when you are asked <em>Passphrase:</em>
The disk is beeing mounted and can be used for backups again. But I don't want to use the terminal every time from now on. So we simply change the long and complicated password to a intermediate short one:</p>
<pre><code>$ diskutil corestorage changeVolumePassphrase 12345678-AAAA-BBBB-CCCC-00DEADBEEF11 -stdinpassphrase
Old passphrase:
New passphrase:
Started CoreStorage operation
Logical Volume passphrase has been changed
Core Storage LV UUID: 12345678-AAAA-BBBB-CCCC-00DEADBEEF11
Finished CoreStorage operation
</code></pre>
<p>Again, paste in your (complicated) password when asked <em>Old passphrase:</em>
Enter a new and easy to remember password when asked <em>New passphrase:</em>
Unmount the disk, stick it back in and enter the new password. Don't forget to check the <em>Remember password</em> checkbox.
Try it. You can unmount it, put it back and now everything works automatically.</p>
<p>Inside your <em>Keychain</em> utility you can see a new entry.</p>
<p><img src="./gfx/53.jpg" alt="" /></p>
<p>The <em>Account</em> data seems familiar: it is the ID of the <em>Timemachine</em> volume.
Now we can change back the password of the device, just enter your new complex password again:</p>
<pre><code>$ diskutil corestorage changeVolumePassphrase 12345678-AAAA-BBBB-CCCC-00DEADBEEF11 -stdinpassphrase
Old passphrase:
New passphrase:
Started CoreStorage operation
Logical Volume passphrase has been changed
Core Storage LV UUID: 12345678-AAAA-BBBB-CCCC-00DEADBEEF11
Finished CoreStorage operation
</code></pre>
<p>Now the other way around, enter the easy to remember password on <em>Old passphrase:</em> and the complicated should be pasted in on <em>New passphrase:</em>
And change it in the keychain also. Just click on <em>Show password</em> and enter the password of your current account in the now showing password dialog. The <em>intermediate</em> password should show up for your <em>Timemachine</em>. Fill in the new (or old one from another perspective) one and <em>Save Changes</em>.</p>
<p><img src="./gfx/54.jpg" alt="" /></p>
<p>Now your disk and the entry in your <em>keychain</em> have both the correct password. Check it out, it <em>just works</em> ;-)</p>
<h1><a class="header" href="#howto-setup-a-pseudo-remote-qt-project" id="howto-setup-a-pseudo-remote-qt-project">Howto setup a pseudo-remote Qt project</a></h1>
<p>If you develop on your own and on just one computer, everything is quite easy: source code in one directory and start developing. First you will make local backups of this directory and after a while you will certainly discover a version control system like <a href="http://git-scm.com">git</a>. Later in time you will get a second computer and also want to develop on/in/with the same source code.</p>
<p>Now things tend to get complicated.</p>
<p>If you store the source code on a network share, you can't develop on the computer that can not reach the share (for whatever reason, maybe you are just not at home using your mobile computer). If you use QtCreator as your favorite IDE, you will notice that it stores the personal project settings in a file called <code>*.pro.user</code> and that one does not like to be opened from different computers.</p>
<p>At least since then you need a change in your workflow. Act like the big ones, just for your own: use a central git repository, pull from there, make changes, commit and push up again. Only that <em>up</em> can must not be a server in the internet, it can be a local directory or a network share somewhere in your home environment. Here is how to convert your local git repository to the new central one:</p>
<p>Copy the project directory to some new place (just to be safe).
Edit <code>.gitignore</code> file, like e.g.</p>
<pre><code># Compiled source #
#############
*.com
*.class
*.dll
*.exe
*.o
*.so
# Packages #
#########
# it's better to unpack these files and commit the raw source
# git has its own built in compression methods
*.7z
*.dmg
*.gz
*.iso
*.jar
*.rar
*.tar
*.zip
# Logs and databases #
######################
*.log
*.sql
*.sqlite
# OS generated files #
######################
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db
# Qt Project files #
####################
*.pro.user*
</code></pre>
<p>Delete <code>*.pro.user</code> and  <code>*.pro.user.*</code> files from repository if they were committed before.</p>
<pre><code>$ git rm *.pro.user*
$ git commit -m &quot;after deleting *.pro.user* files&quot;
</code></pre>
<p>Create remote (central) repository</p>
<pre><code>$ git clone --bare /path/to/your/local/copy/repository /path/to/your/remote/repository.git
</code></pre>
<p>Add a reference to the remote (central) repository to your local copy</p>
<pre><code>$ cd /path/to/your/local/copy/repository
$ git remote add origin /path/to/your/remote/repository.git
$ git push --set-upstream origin master
</code></pre>
<p>Note that <em>origin</em> is the <em>name</em> referencing your central remote repository.
Make local changes and push them with</p>
<pre><code>$ git push origin
</code></pre>
<p>Clone repository on other computer:</p>
<pre><code>$ git clone /path/to/your/remote/repository.git
</code></pre>
<p>Make local changes, commit and push</p>
<pre><code>$ git commit -a -m &quot;changes I have done&quot;
$ git push origin
</code></pre>
<h1><a class="header" href="#snowden-nsa-cloud-surveillance-escape" id="snowden-nsa-cloud-surveillance-escape">#Snowden, #NSA, #cloud, #surveillance, #escape</a></h1>
<p>You heard of <a href="http://en.wikipedia.org/wiki/Edward_Snowden">Edward Snowden</a> that's for sure.</p>
<p>Somehow you woke up and want out of the cloud.</p>
<p>If you used to use something like <a href="https://www.dropbox.com">Dropbox</a> but don't want to miss the comfort, think about using <a href="http://labs.bittorrent.com/experiments/sync.html">BitTorrent Sync</a>. Choose a setup that works in your LAN only and you are fine.</p>
<p>One thing you might still miss: the Dropbox server was kind of a clearing instance and you didn't need to have at least two computers online to get things going. That's true, but think of using a <a href="http://www.raspberrypi.org">Raspberry Pi</a> as the &quot;always on&quot; repository. Works just fine and is even faster.</p>
<p><strong>Update</strong></p>
<p>You might even consider using <a href="https://syncthing.net/">Syncthing</a> instead of BtSync, because it is open source.</p>
<h1><a class="header" href="#osx-mountain-lion---screensaver-can-not-show-your-iphoto-library-anymore" id="osx-mountain-lion---screensaver-can-not-show-your-iphoto-library-anymore">OSX Mountain Lion - screensaver can not show your iPhoto library anymore</a></h1>
<p>My favorite screensaver on OSX Snow Leopard &amp; Lion was the one that showed the iPhoto Library. This way you get a glimpse at memorable moments (again).
After migration to OSX Mountain Lion I noticed that the screensaver didn't show photos anymore - strange - but I didn't investigate then. Last weekend I entered the screensaver settings and was more than surprised that all those screensavers are not capable to show photos of my iPhoto library. Come on Apple, is that your implementation of <em>it simply works</em>?</p>
<p>After visiting Mr. Google it was clear: I am using an older version of iPhoto (yes, the one that came with Snow Leopard, the one I've already paid for), after an update via Appstore this would work again. Well, hello? What kind of mindfuck is that? iPhoto still works on OSX Mountain Lion, there is obviously no technical reason here.</p>
<p>It's politics and</p>
<p>money making.</p>
<p>As simple as that.</p>
<p>Albeit I like the physical touch and feel of Apple devices, I surely don't like their way of customer experience and paternalism.
As a customer I would expect that an OS update also updates the applications that came with the updated OS.
I don't know how much I can cope with that kind of bullshit but I sense the final straw is near. The next computer must not be an Apple device!</p>
<p>Ok, so much for ranting, here is a little workaround. It's not perfect, because it doesn't show the images that were manually rotated. But hey, some is better than nothing.
The iPhoto library is no single file, it's a folder - just presented as single file (as in &quot;the regular user does not have to care what's inside&quot;) by the Finder. if you choose <em>Show package content</em> from the context menu, you can look inside.</p>
<p><img src="./gfx/55.jpg" alt="" /></p>
<p>And since it's a folder, we can create a link to a folder inside of it.
Open your terminal and enter</p>
<pre><code>$ ln -s /Users/YOURUSERNAME/Pictures/iPhoto\ Library/Originals/ /Users/YOURUSERNAME/Pictures/LinkToPhotoLibrary
</code></pre>
<p>Go to your screensaver preferences, choose one of those that can show images. Click on <em>Choose Folder</em> from the dropdown box and choose <code>/Users/YOURUSERNAME/Pictures/LinkToPhotoLibrary</code> as directory.</p>
<p><img src="./gfx/56.jpg" alt="" /></p>
<p>Voilá, there are some photos :-)</p>
<h1><a class="header" href="#windows7-icon-cache-corrupt" id="windows7-icon-cache-corrupt">Windows7 icon cache corrupt</a></h1>
<p>You use Windows7 and the icon cache is often corrupt? Maybe you have icons on your Desktop that refer to network drives? You want that fixed? During logon if possible?</p>
<p>Ay caramba!</p>
<p>Problem here is that it does not work during logon scripts, the cache must be rebuild afterwards.
Well, then - start it afterwards :-)</p>
<pre><code>RUN &quot;%ComSpec% /C ping 127.0.0.1 -n 5 &gt; NUL 2&gt;&amp;1 &amp; %windir%\system32\ie4uinit.exe -ClearIconCache&quot;
</code></pre>
<p>This example uses <a href=":http://www.kixtart.org/">Kixtart</a> as logon script language.</p>
<h1><a class="header" href="#poor-mans-surveillance-system-with-raspberry-pi" id="poor-mans-surveillance-system-with-raspberry-pi">Poor man's surveillance system with Raspberry Pi</a></h1>
<p>A few days ago I've bought an IP camera from Foscam.</p>
<p><img src="./gfx/57.jpg" alt="" /></p>
<p>The result was very disappointing. Besides the fact that this thing was D.O.A. (it lost its network connection every 10-15 seconds and never transferred one single image), the web interface was for lack of a better word: <em>bullshit</em>. That thing went straight back and they didn't convince me to order another one. Even the max. resolution of the camera was not as advertised.</p>
<p>So I wanted an IP camera, a Raspberry PI was already at home. It could simply be extended to use wireless LAN and there is a camera module available.
<em>ding</em> <em>ding</em> <em>ding</em>
It's project time :-)</p>
<p>Instead of a infrared motion sensor or even a fancy <em>is there a movement in the picture</em> algorithm I decided to go vintage. Using a reed switch it is quite easy to check if a door or window has been opened. The Raspberry Pi has a <a href="http://elinux.org/RPi_Low-level_peripherals">GPIO interface</a>, connecting an external switch to the little computer is almost foolproof.
You just need a pull-up resistor and you are ready to go.</p>
<p><img src="http://elinux.org/images/4/49/Input_button.png" alt="Image source: http://elinux.org/images/4/49/Input_button.png" /></p>
<p><img src="./gfx/58.jpg" alt="" /></p>
<p>That's for the switch part.</p>
<p>For wireless connection I've <a href="http://www.gtkdb.de/index_36_2121.html">attached a Logilink WL0145</a> (sorry, it's in German). Worked like a charm at first sight but the adapter lost connection after one day. There seems to be a problem with the power management, so it's simply siwtched off (runf <code>iwconfig</code> to see if it's <em>on</em>), edit <code>/etc/network/interfaces</code> and put a line with <code>wireless-power off</code> in there.</p>
<p>Maybe that's not enough, future will tell. But there is <a href="https://github.com/mharizanov/WiFi_Check/blob/master/WiFi_Check">help out there</a>.</p>
<p>Almost a year ago I started learning C++, so it became clear that a tiny bit of the software side would be coded in C++. The first examples I found showed some kind of bash command that read in the status of a GPIO pin and then slept for some time and that in an endless loop. This would be the first time that I would write code in C++ for Linux, so the Qt framework comes into mind to even out the platform specific details. Not knowing the exact implementation details of a QTimer, I sensed that it would be a tiny bit more elegant to use a timer that calls a function, which pulls the status of the GPIO pin. There is even a Debian Wheezy based kernel out there that would enable the use of interrupts but I couldn't find any examples, details, whatsoever.</p>
<p>The first kind of library to access those pins from C++ that I found was <a href="http://hertaville.com/2012/11/18/introduction-to-accessing-the-raspberry-pis-gpio-in-c/">http://hertaville.com/2012/11/18/introduction-to-accessing-the-raspberry-pis-gpio-in-c/</a>. So I used it.</p>
<p>The outcome is <a href="https://github.com/hardcodes/gpioObserver.git">gpioObserver</a></p>
<p>When started on the command line it waits for a given GPIO pin to change its status to the desired one and then call an external program, e.g. <a href="http://www.raspberrypi.org/camera">raspivid</a>.</p>
<p>For reading the status of a GPIO pin you must be <code>root</code>, <code>sudo</code> as user <code>pi</code> or edit <code>/etc/sudoers</code> with <code>visudo</code> in such a way that you can <code>sudo gpioOberserver</code> from a regular Linux user.</p>
<p>To get started, install the <a href="http://qt-project.org/wiki/apt-get_Qt4_on_the_Raspberry_Pi">Qt environment on your Debian Wheezy Image</a>, download the code from <a href="https://github.com/hardcodes/gpioObserver.git">Github</a> and compile.</p>
<pre><code>$ git clone https://github.com/hardcodes/gpioObserver.git
</code></pre>
<p>Compile with</p>
<pre><code class="language-sh">$ qmake
$ make
$ sudo make install
</code></pre>
<p>The executable will be installed as <code>/user/local/bin/gpioObserver</code>. You can <code>sudo</code> it as user <code>pi</code> or add a new user and work on <code>/etc/sudoers</code> if you want that task separated.</p>
<p><code>gpioObserver</code> waits for a signal change from <code>0</code> to <code>1</code> and then starts a <del><a href="https://github.com/hardcodes/doorAction.sh.git">batch script</a></del> that mounts a drive on a NAS system, records a videofile with <code>raspivid</code> and unmounts the drive again. Start <code>gpioObserver</code> from <code>crontab</code>, e.g. like</p>
<p><code>@reboot /bin/sudo /usr/local/bin/gpioObserver 17 1 /home/picam/doorAction.sh &gt;&gt; /home/picam/log/doorAction.log 2&gt;&amp;1</code></p>
<p><img src="./gfx/59.jpg" alt="" /></p>
<p><em>TADA</em> - your poor man's surveillance system with Raspberry Pi</p>
<p><strong>Update</strong></p>
<p>Today I would use Rust to write this little program.</p>
<h1><a class="header" href="#writing-your-own-nslookup-in-c" id="writing-your-own-nslookup-in-c">Writing your own nslookup in C++</a></h1>
<p>Usually looking up the name of a computer or server is going on behind the scenes and we don't care about it. If some piece of software wants to talk with another computer it calls some kind of <em>gethostbyname()</em> function and the operating system does the job for you using the IP configuration. At work I encountered a situation where during the logon phase on a Windows terminal server an IP of another domain was needed. Of course the DNS servers knew of each other and could resolve names of the other domain but given the local DNS cache and some other DNS specific stuff there was some blindness regarding changing IP addresses.</p>
<p>So we used <code>nslookup</code> inside the logon script and parsed the output to be more up-to-date.</p>
<p>Fine, thank you for reading, good bye...</p>
<p>Err...not. If the one DNS server configured in the script was offline, everything was on the fritz. Now we could have asked more than one server, parse the output, yada yada, but logon scripts should not take too long. What we wanted was a single command for the terminal that would do the job.
And there the question raised: could I do some kind of <code>nslookup</code> on my own?</p>
<p>First impressions of the native <a href="http://msdn.microsoft.com/de-de/library/windows/desktop/ms738520%28v=vs.85%29.aspx">Windows API</a> were not very promising (it may be my fault but I didn't find a way to tell which server to ask). After <a href="http://gieseanw.wordpress.com/2010/03/25/building-a-dns-resolver/">reading this blog entry</a> I thought about doing it with <a href="http://qt-project.org/">Qt</a>.</p>
<p>Qt provides me a lean and quite modern network interface, signals &amp; slots for asynchronous execution and platform independence as the cherry on top. The rest would be more or less a bare implementation of the <a href="http://www.ietf.org/rfc/rfc1035.txt">RFC 1035</a>.</p>
<h2><a class="header" href="#feasibility-study" id="feasibility-study">Feasibility study</a></h2>
<p>The idea was to implement just enough of the protocol to send a request to some DNS servers and get an answer. The communication should be captured with <a href="http://www.wireshark.org/">Wireshark</a>. After spending some days reading about the RFCs, the way other people implemented it, I came to the conclusion: to develop this on my own is madness! Why should I reinvent the wheel here?</p>
<h3><a class="header" href="#update" id="update">Update</a></h3>
<p>After a while I stumbled upon an entry in <a href="http://stackoverflow.com/questions/8931824/how-does-one-specify-a-specific-dns-server-to-query-using-dnsquery">stackoverflow</a>. So the MSND documentation is just wrong. On the other hand this isn't really C++ (IMHO), it's a C API.</p>
<p>Just look in the <a href="http://code.msdn.microsoft.com/windowsdesktop/Asynchronous-DNS-query-API-39a57215/sourcecode?fileId=58673&amp;pathId=520659639">example code</a>, there is a <code>goto</code>. Yes, I am quite new in the C++ universe but please, just <em>please</em>.</p>
<h2><a class="header" href="#light-at-the-end-of-the-tunnel" id="light-at-the-end-of-the-tunnel">Light at the end of the tunnel</a></h2>
<p>A twitter tweet brought me on the homepage of the <a href="http://pocoproject.org">POCO C++ libraries</a> again and I discovered the <code>DNS</code> in <code>Poco::Net</code>. So I downloaded the code and started hacking...</p>
<h1><a class="header" href="#building-clang-format-and-friends-on-osx-mountain-lion" id="building-clang-format-and-friends-on-osx-mountain-lion">Building clang-format and friends on OSX Mountain Lion</a></h1>
<p>Apple provides you with the <a href="http://clang.llvm.org/index.html">clang</a> compiler, so why should you want to compile it yourself? Because there are some utilities out there (e.g. <a href="http://clang.llvm.org/docs/Tooling.html">clang-format</a>), that Apple does - for whatever reason - not bring to your Mac. Strange considering the fact that they are heavily involved into clang development. For Mr. and Mrs. Average those tools aren't needed on a Mac, that's for sure but for developers? Come on Apple, wake up!</p>
<p><img src="http://www.tonyrogers.com/weapons/images/high_speed_photos/webready/30_bullet_apple.jpg" alt="Image source: http://www.tonyrogers.com/weapons/images/high_speed_photos/webready/30_bullet_apple.jpg" /></p>
<p>Never mind, it's easy.</p>
<h2><a class="header" href="#tools" id="tools">Tools</a></h2>
<p>Have a look at the <a href="http://llvm.org/docs/GettingStarted.html#requirements">prerequisites</a> and install the tools that are not on your Mac, e.g. <a href="./20130123--1.html">auto tools</a>.</p>
<h2><a class="header" href="#getting-the-sourcecode" id="getting-the-sourcecode">Getting the sourcecode</a></h2>
<p>Open you terminal and get download the code</p>
<pre><code>$ # just for convenience
$ export build=~/devtools # or wherever you'd like to build
$ mkdir -p $build
$ cd $build
$ # first llvm, the basic infrastructure
$ svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm
$ # followed by clang, the compiler
$ cd llvm/tools
$ svn co http://llvm.org/svn/llvm-project/cfe/trunk clang
$ cd ../..
$ # finally the tools, the reason for this all here
$ cd llvm/tools/clang/tools
$ svn co http://llvm.org/svn/llvm-project/clang-tools-extra/trunk extra
$ cd ../../../..
</code></pre>
<h2><a class="header" href="#build" id="build">Build</a></h2>
<h3><a class="header" href="#llvm-and-clang" id="llvm-and-clang">llvm and clang</a></h3>
<pre><code>$ mkdir -p $build/clang
$ cd $build/clang
$ # As I already have a clang package from Apple that I don't want to mix up,
$ # I do not provide --prefix here
$ ../llvm/configure --enable-libcpp --enable-cxx11 --enable-debug-symbols=no --enable-optimized
$ $ ls
Makefile	bindings	docs		lib		runtime		unittests
Makefile.common	config.log	examples	llvm.spec	test		utils
Makefile.config	config.status	include		projects	tools
$ # compiling will take some time…almost an hour on my computer
$ make
</code></pre>
<h3><a class="header" href="#clang-tools" id="clang-tools">clang-tools</a></h3>
<p>The tools were automatically build, too.</p>
<p><img src="http://isocpp.org/images/uploads/gn12-cc.PNG" alt="Image source: http://isocpp.org/images/uploads/gn12-cc.PNG" /></p>
<p>Just go on, have a look in <code>$build/clang/Release+Asserts</code>. If you want to have a glimpse on what those tools can do for you, watch <a href=":http://channel9.msdn.com/Events/GoingNative/2013/The-Care-and-Feeding-of-C-s-Dragons">Chandler Carruth's</a> talk from <em>Going Native 2013</em>.</p>
<h1><a class="header" href="#use-clang-format-with-qtcreator" id="use-clang-format-with-qtcreator">Use clang-format with QtCreator</a></h1>
<p>Thanks to <a href="https://twitter.com/t_hunger">Tobias Hunger</a> from <a href="http://www.digia.com">Digia</a> I now learned how to extend QtCreator with external tools. Not that it's difficult but he had a talk about it at the Qt Developer Days 2013 in Berlin and showed that it's very easy and powerful.</p>
<p>As I saw <a href="http://channel9.msdn.com/Events/GoingNative/2013/The-Care-and-Feeding-of-C-s-Dragons">Chandler Carruth talking</a> about clang and its tools at <em>Going Native 2013</em> (just on video, no need to get jealous here), I was instantly hooked, <a href="./20131019--1.html">built the tools</a> and now want to use them inside QtCreator.</p>
<p>Open the preferences and add a new category if you like. This appears as a new menu entry inside the Tools/External menu.</p>
<p><img src="./gfx/60.jpg" alt="" /></p>
<p>Add a new tool, look up the binary (or script) and add its arguments</p>
<p><img src="./gfx/61.jpg" alt="" /></p>
<p>QtCreator has some variables that you can use to specify the source code file that should be processed by the external tool.</p>
<p><img src="./gfx/62.jpg" alt="" /></p>
<p><img src="./gfx/63.jpg" alt="" /></p>
<p>Here is one tiny example of what <code>clang-format</code> does for your code. Choose <em>clang-format</em> from the <em>tools</em> menu and</p>
<p><img src="./gfx/66.jpg" alt="" /></p>
<p>this code...</p>
<p><img src="./gfx/66.png" alt="" /></p>
<p>...turns into...</p>
<p><img src="./gfx/65.png" alt="" /></p>
<p>But be careful: currently QtCreator does not enable <em>undo</em> for such an action. Of course your source code control system fills up that gap.</p>
<h1><a class="header" href="#20131020---raspberry-pi-crashes-aka-journal-commit-io-error" id="20131020---raspberry-pi-crashes-aka-journal-commit-io-error">20131020 - Raspberry Pi crashes AKA &quot;journal commit I/O error&quot;</a></h1>
<p>For some weeks I use my Raspberry Pi as kind of a <a href="./20130924--1.html">surveilance system</a>. It worked quite well but after some days it stopped working. At first sight the source of trouble seemed to be the wireless lan interface connected to the USB port. So I searched in the internet for a while and came across the <code>smsc95xx.turbo mode=n</code> setting in the <code>/boot/cmdline.txt</code> file. Much better then but still not perfect. After two weeks it stopped again and this time it didn't want to come alive. Well, it came alive but only for a short time until I tried to download a file via wireless interface. The terminal only showed many warnings like <code>journal commit I/O error</code> and that's all from that moment on.
After some internet seach I found <a href="http://elinux.org/Rpi_Hardware#How_Can_I_tell_if_the_power_supply_is_inadequate.3F">this page</a> where they explained how to check the voltage.</p>
<p><img src="http://elinux.org/images/thumb/d/d1/RPI_Test_Points.JPG/400px-RPI_Test_Points.JPG" alt="Image source: http://elinux.org/images/thumb/d/d1/RPI_Test_Points.JPG/400px-RPI_Test_Points.JPG" /></p>
<p><em>5.07 V</em> showed mine. Looked perfect. Then I booted to device while I was measuring and then the voltage dropped to 4.6V a few times. Multimeters are kind of slow so it must have been a huge drop. Needless to say that I used a <em>quality</em> power supply from <em>Apple</em>. Seems to be the root cause for my problems.</p>
<p>I'm going to order a new power supply right <em>now</em>...</p>
<h1><a class="header" href="#jolla--sailfishos-wishlist" id="jolla--sailfishos-wishlist">Jolla / SailfishOS wishlist</a></h1>
<p>First of all, if you somehow came across this blog entry, please notice that I am not related to Jolla in any kind and do not have further insights in their development.</p>
<p>So take this wishlist as what it is: these are feature I'd like to see in a Jolla/SailfishOS phone. Don't make up any rumors from what you read here! I simply assume that they provide common features from other brands, so I won't repeat them here.</p>
<p><em>Battery</em></p>
<ul>
<li>for me a long lasting battery would make a really smart phone. You started with a full battery in the morning and need a power supply at 5pm? <em>Not</em> smart! I'm not quite sure that they can achieve the extraordinary here but hey, let me dream my dreams. One week would be great and everything more would be (and I rarely use this word) awesome.</li>
</ul>
<p><em>Openness</em></p>
<ul>
<li>Every owner of a phone (or any hardware) should be able to with it what he wants. If I want to write software for that thing, it must be possible without any fees, payments or artificial hoops to jump through.</li>
<li>No limits for developers, which means: a developer should be able to use each and every resource of that phone. That collides with security but I think that can be managed to a certain degree.</li>
<li>Secure way to opt in for all kinds of access levels to the device (see security).</li>
<li>Open Source compatible shop / license model(s).</li>
<li>Filesystem access. If you want to be productive, you can't live in an app-centric ecosystem. You often have data, that is used from different apps. There needs to be some common file space where all apps can share data. Blackberry did that and even Microsoft. Again, developers should actively opt in for it.</li>
<li>External storage. If I want to connect a USB flashdrive, harddrive or whatever, it simply should be possible, it is my device. But it should be consistent in use: many Android phones mount external devices in different paths: a usability nightmare.</li>
<li>Micro SD card slot (maybe in #theotherhalf), <a href="http://en.wikipedia.org/wiki/Secure_Digital">Class10 capable of course or even better: UHS-II</a>.</li>
<li>Network printers from any manufacturers should be accessible.</li>
<li>PDF export from any document.</li>
<li>shell (bash or whatever) access (see security) and therefore <em>ssh</em>, <em>scp</em> and all that stuff.</li>
<li>possible shop alternatives without rooting the device.</li>
<li>Bluetooth in every possible aspect.</li>
<li>Regular security updates, should be no problem in a Linux RPM packaged environment</li>
<li>Predictable product lifecycle. Oh boy, I hate it when a product gets artificially crippled (can you say Apple?), just to sell the next generation. If people are happy with a product they will come again, no force needed.</li>
</ul>
<p><em>Connectivity</em></p>
<ul>
<li>OpenVPN.</li>
<li>syncml support. Wouldn't it be great to sync your address book and calendar with non-cloudy classic applications?</li>
<li>Cross platform cross browser bookmark sync.</li>
<li>Cross platform address book sync.</li>
<li>Cross platform calendar sync.</li>
<li>iCal</li>
<li>CalDav</li>
</ul>
<p><em>Security</em></p>
<ul>
<li>PGP mail</li>
<li>Mr. and Mrs. Average need a secure phone. If you want many customers, you simply can't lean back and babble something from Linux and command line freedom. If a geek can do with that thingy what he wants, that is OK, because he certainly knows what the consequences are. But a regular user does not care, does not want to care and to be honest: why must or should he? So we need a <em>sandbox</em>. Yes, your eyes are alright. Most apps would do pretty fine inside a sandbox so why give up the security that comes along with it? But I claimed that I want an open phone, so every developer should be able to configure his app for a wider or deeper access. And if he does so, that should be clearly visible in the Shop. This way you have at least a chance to think about the entitlements, an application asks for. A calendar app that needs to install Kernel modules is kind of suspicious.</li>
<li>Secure Shop. Customers need at least one trustworthy shop where they can buy their apps. This is a big challenge because it binds resources. And it ain't 100% secure. Just look at Apples Appstore. How many apps had tethering inside so far?</li>
<li>Easy backup of all the data on the device</li>
<li>No enforcing of <em>the</em> cloud</li>
</ul>
<p><em>Usability</em></p>
<ul>
<li>sophisticated on screen keyboard. Provide some virtual cursor keys, so that a user can easily place the cursor. Fumbling with a magnifier is a no-go.</li>
<li>A nice way to organize browser bookmarks - maybe that's a good idea for an extra app.</li>
<li>A shop system where you can actually find something. Should be easy? Reality shows that it's not (so far).</li>
<li>A shop system where you can try before you buy.</li>
</ul>
<p><em>Apps</em></p>
<ul>
<li>Dropbox integration.</li>
<li>KeePass client.</li>
<li>BTSync</li>
</ul>
<p>Those two are the most important ones for me. Dropbox is cloud enough (well, after knowing about the NSA I am not so sure about that one), KeePass is simply crucial!</p>
<ul>
<li>IRC chat</li>
</ul>
<p><em>t.b.c.</em></p>
<p>P.S.: If I write <em>he</em>, <em>she</em> is also included ;-)</p>
<h1><a class="header" href="#state-machines---meeting-c-2013-aftermath-1" id="state-machines---meeting-c-2013-aftermath-1">State Machines - Meeting C++ 2013 aftermath 1</a></h1>
<p>At this years Qt Developer Days in Berlin there was a talk that mentioned <a href="http://qt-project.org/doc/qt-4.8/statemachine-api.html">The State Machine Framework</a> from Qt but I didn't have the time to look into it. I just put it onto my never ending <em>to do</em> list.</p>
<p>I was fortunate enough to also attend <a href="http://meetingcpp.de/index.php/mcpp2013.html">Meeting C++ 2013</a> in Düsseldorf and watched <a href="http://meetingcpp.de/index.php/speakerview13/items/19.html">Christophe Henry's</a> talk about <a href="http://meetingcpp.de/index.php/talkview13/items/17.html">Asynchronous programming using the Boost Meta State Machine library</a>. In the beginning of the talk Christophe gave a little overview of what a state machine basically is. I don't remember him mentioning the name but it looked like <a href="http://www.wisdom.weizmann.ac.il/%7Edharel/SCANNED.PAPERS/Statecharts.pdf">Harel's Statecharts</a> also referenced from the Qt documentation.</p>
<p>The first thing that came to my mind was: <em>this can fundamentally change the way I code!.</em></p>
<p>Raise your hand if you never ended up in some kind of spaghetti code when GUI programming was involved and the transitions from one state into the other (funny, I even used to have the same kind of wording) were stored in a myriad of bool variables. I must confess of having done that.</p>
<p>For some time now I was pondering about a way to organize multi platform code. More or less clear was the idea of putting the <em>business logic</em> into a library. This sounds quite easy in theory but providing a clean interface between your <em>data</em>, the <em>logic</em> and the <em>GUI</em> (= outside world) was not.
Well, here we are, <em>state machine</em> to the rescue.</p>
<p>What I really liked about Christophe's talk and the boost library was the way the code was organized and being the documentation at the same time. Even someone without a programming background could actually read this! (Stripped of all the comments that is. I am really sure that <a href="http://meetingcpp.de/index.php/speakerview13/items/11.html">Peter Sommerlad</a> would have called them &quot;<em>verboten!&quot;</em>)</p>
<p>But then I remembered the earlier talk in Berlin where the Qt state machine was mentioned. What's the difference about the implementations? Which one would better suit my needs?</p>
<p>Reading the Qt documentation I came the conclusion that it is really hard wired to the Qt objects, signals and slots and so on. Not exactly what I had in mind and besides that, it's ugly (sorry):</p>
<pre><code>//QStateMachine machine;
     QState *s1 = new QState();
     QState *s2 = new QState();
     QState *s3 = new QState();
//Then, we create the transitions by using the QState::addTransition() function:
     s1-&gt;addTransition(button, SIGNAL(clicked()), s2);
     s2-&gt;addTransition(button, SIGNAL(clicked()), s3);
     s3-&gt;addTransition(button, SIGNAL(clicked()), s1);
//Next, we add the states to the machine and set the machine's initial state:
     machine.addState(s1);
     machine.addState(s2);
     machine.addState(s3);
     machine.setInitialState(s1);
//Finally, we start the state machine:
     machine.start();
</code></pre>
<p>In the introduction of the <a href="http://www.boost.org/doc/libs/1_54_0/libs/msm/">Boost Meta State Machine</a> there is a list of <em>snags</em> of common state machine libraries, here is one example of how they might look:</p>
<pre><code>state s1 = new State; // a state
state s2 = new State; // another state
event e = new Event; // event
s1-&gt;addTransition(e,s2); // transition s1 -&gt; s2
</code></pre>
<p>Looks familiar?</p>
<p>So in the next few days I will give the <a href="http://www.boost.org/doc/libs/1_54_0/libs/msm/doc/HTML/index.html">boost library</a> a chance. There is even a complete PDF inside the <em>doc</em> folder in the library source code folder. Good for offline reading on the train.</p>
<p><em>That's the way I like it…aha…aha</em></p>
<p><a href="http://meetingcpp.de/index.php/speakerview13/items/25.html">Tony van Eerd</a> gave a quite longish but diverse and very interesting keynote at <a href="http://meetingcpp.de/index.php/mcpp2013.html">Meeting C++ 2013</a> and besides many, many interesting topics he showed an image of a video game console (the brand doesn't really matter here) and talked about how the gamepad was the pure manifestation of a controller in the context of <a href="http://de.wikipedia.org/wiki/Model_View_Controller">Model View Controller</a>. The buttons on the gamepad are nothing more and nothing less: just buttons that don't know anything about the outside world. Not even their own status, they just tell a status change to the outside world.</p>
<p>I'm just catching a glimpse of an idea of how to organize GUI/code/programming in future. It may seem in a way more complicated than the classic approach but in the end it will pay off.</p>
<p>A big <em>thank you</em> goes out to all the people involved in changing my way of thinking!</p>
<p><strong>Update</strong></p>
<p>On Jolla phone the boost libraries are currently not available. Seems that I have to look into the Qt state machine as well.</p>
<h1><a class="header" href="#shameless-plug" id="shameless-plug">Shameless Plug</a></h1>
<p>Alright earthlings,</p>
<p>as you may know, I spend some of my rare spare time with a music project called <a href="http://www.voxager.de">voXager</a>. Our new and first album is out now!</p>
<p><em>Attention, space-faring creatures around the universe! Our good Spaceship Voxager has now arrived at it's first destination. Please meet and greet the dauntless crew at the following locations:</em></p>
<ul>
<li><a href="https://itunes.apple.com/de/album/beyond-the-frontier/id742401072">iTunes Germany</a>,</li>
<li><a href="https://itunes.apple.com/album/beyond-the-frontier/id742401072">iTunes USA</a>,</li>
<li><a href="http://www.amazon.de/Beyond-Frontier-Voxager/dp/B00GM949LE">Amazon Germany</a>,</li>
<li><a href="http://www.amazon.com/Beyond-Frontier-Voxager/dp/B00GM63HA6">Amazon USA</a></li>
</ul>
<p><img src="https://m.media-amazon.com/images/I/81ueTcDoh-L._SS500_.jpg" alt="" /></p>
<p><em>We hope that you'll enjoy the flight and will stay with us for another trip far beyond the frontier of space and time!</em></p>
<h1><a class="header" href="#developing-with-sailfishos---a-short-introduction" id="developing-with-sailfishos---a-short-introduction">Developing with SailfishOS - a short introduction</a></h1>
<p>It should be obvious that I am eager to develop for the Jolla smartphone. On my way some questions came up and I tried to answer them as good as I can. After a while I decided to write down what I’ve learned, so that I had a central place to come back to and maybe others can benefit from this small document, too. The latest and greatest version is to be found on <a href="https://github.com/hardcodes/developwithsailfishos">Github</a>. As of now it still just a skeleton but I'm working on putting some flesh on it.</p>
<p><em>Just the PDF, please</em></p>
<p><del>No problem, just &quot;download from here&quot;:http://hardcodes.de/SailfishOS/Developing-with-SailfishOS.pdf.</del></p>
<p><strong>Update</strong> the pdf file is not available anymore.</p>
<p><em>Note</em>: the git repository might be more up-to-date ;-)</p>
<p><em>Why a PDF at all?</em></p>
<p>Because it is very convenient to carry around when you are offline. I travel by train a lot and there are always blind spots with no internet connection at all.</p>
<p><em>LaTeX</em></p>
<p>The repository contains the LaTeX source files and the resulting PDF &quot;Developing with SailfishOS&quot;. Criticism, suggestions and contribution welcome. I've already heard that it might be better to use another markup language to lower the barrier for contribution. LaTeX can be a little beast. Currently I am not sure which language to choose.
Candidates (at the moment) are:</p>
<ul>
<li>org-mode</li>
<li>markdown</li>
<li>MultiMarkDown</li>
</ul>
<p>Before I choose the alternative and convert the document, I want to add some topics that spin around in my head right now. Until then this document/repository is very much work in progress.</p>
<p><em>This work is licensed under the Creative Commons Attribution-NonCommercial- ShareAlike 4.0 International License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US">http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US</a>.</em></p>
<h1><a class="header" href="#jolla-wish-list---reality-check" id="jolla-wish-list---reality-check">Jolla wish list - reality check</a></h1>
<p>Some time ago, <a href="./20131024--1.html">I wrote about my wishes for the upcoming Jolla device</a>. Now that phone is on the market and has finally arrived at my home. Time to check what's in store. The original text is  written in <em>italic</em>, normal text is the updated content. </p>
<p><em>Battery</em></p>
<ul>
<li><input disabled="" type="checkbox"/>
<i>for me a long lasting battery would make a really smart phone. You started with a full battery in the morning and need a power supply at 5pm? Not smart! I’m not quite sure that they can achieve the extraordinary here but hey, let me dream my dreams. One week would be great and everything more would be (and I rarely use this word) awesome.</i>
when the TOH bug is fixed, I get something about 2,5 days out of that phone. Of course the theoretical data reads better, but I tend to use a phone and not leave it in pure stand by. Could be better but isn't bad either. If there will be an <em>other half</em> with <a href="http://talk.maemo.org/showthread.php?p=1397595#post1397595">wireless charging</a> I won't care anymore. ~As long as I don't go on a longer trip far from power outlets~</li>
</ul>
<p><em>Openness</em></p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<i>Every owner of a phone (or any hardware) should be able to with it what he wants. If I want to write software for that thing, it must be possible without any fees, payments or artificial hoops to jump through.</i>
check!</li>
<li><input disabled="" type="checkbox"/>
<i>No limits for developers, which means: a developer should be able to use each and every resource of that phone. That collides with security but I think that can be managed to a certain degree.</i> Not 100% sure yet, but close to check!</li>
<li><input disabled="" type="checkbox"/>
<i>Secure way to opt in for all kinds of access levels to the device (see security).</i> So far a check! But that might change in future.</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>Open Source compatible shop / license model(s).</i> check!</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>Filesystem access. If you want to be productive, you can't live in an app-centric ecosystem. You often have data, that is used from different apps. There needs to be some common file space where all apps can share data. Blackberry did that and even Microsoft. Again, developers should actively opt in for it.</i> You can access the filesystem and there are already free 3rd party apps to support the user doing so. check!</li>
<li><input disabled="" type="checkbox"/>
<i>External storage. If I want to connect a USB flashdrive, harddrive or whatever, it simply should be possible, it is my device. But it should be consistent in use: many Android phones mount external devices in different paths: a usability nightmare.</i> dunno</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>Micro SD card slot (maybe in #theotherhalf)</i> No, it's in the body of the phone, just behind the other half. <i>Class10 capable of course or even better: UHS-II</i> check! But I don't know the max. supported standard.</li>
<li><input disabled="" type="checkbox"/>
<i>Network printers from any manufacturers should be accessible.</i> nope</li>
<li><input disabled="" type="checkbox"/>
<i>PDF export from any document.</i> nope</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>shell (bash or whatever) access (see security) and therefore <em>ssh</em>, <em>scp</em> and all that stuff.</i> check!</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>possible shop alternatives without rooting the device.</i> check!</li>
<li><input disabled="" type="checkbox"/>
</i>Bluetooth in every possible aspect.</i> There is bluetooth support of course but not in every aspect - so nope, not yet?</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>Regular security updates, should be no problem in a Linux RPM packaged environment</i> check!</li>
<li><i>Predictable product lifecycle. Oh boy, I hate it when a product gets artificially crippled (can you say Apple?), just to sell the next generation. If people are happy with a product they will come again, no force needed.</i> Only time will tell.</li>
</ul>
<p><em>Connectivity</em></p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<i>OpenVPN.</i> partially, install from developer mode, GUI missing.</li>
<li><input disabled="" type="checkbox"/>
<i>syncml support. Wouldn't it be great to sync your address book and calendar with non-cloudy classic applications?</i> nope.</li>
<li><input disabled="" type="checkbox"/>
<i>Cross platform cross browser bookmark sync.</i> nope!</li>
<li><input disabled="" type="checkbox"/>
<i>Cross platform address book sync.</i> nope, not yet?</li>
<li><input disabled="" type="checkbox"/>
<i>Cross platform calendar sync.</i> nope, not yet?</li>
<li><input disabled="" type="checkbox"/>
<i>iCal</i> nope, not yet? Seems to be on the <a href="https://together.jolla.com/question/534/support-for-caldav-based-calendars-eg-google-calendar/">roadmap now</a>.</li>
<li><input disabled="" type="checkbox"/>
<i>CalDav</i> nope, not yet? Seems to be on the <a href="https://together.jolla.com/question/534/support-for-caldav-based-calendars-eg-google-calendar/">roadmap now</a>.</li>
</ul>
<p><em>Security</em></p>
<ul>
<li><input disabled="" type="checkbox"/>
<i>PGP mail</i> nope, being discussed at the developer mailing list.</li>
<li><input disabled="" type="checkbox"/>
<i>Mr. and Mrs. Average need a secure phone. If you want many customers, you simply can't lean back and babble something from Linux and command line freedom. If a geek can do with that thingy what he wants, that is OK, because he certainly knows what the consequences are. But a regular user does not care, does not want to care and to be honest: why must or should he? So we need a <em>sandbox</em>. Yes, your eyes are alright. Most apps would do pretty fine inside a sandbox so why give up the security that comes along with it? But I claimed that I want an open phone, so every developer should be able to configure his app for a wider or deeper access. And if he does so, that should be clearly visible in the Shop. This way you have at least a chance to think about the entitlements, an application asks for. A calendar app that needs to install Kernel modules is kind of suspicious.</i> nope. At least to in the way I intended. But that does not mean that it is a insecure phone. There is an interesting discussion going on <a href="https://together.jolla.com/question/9670/api-security-model/">together.jolla.com</a>.</li>
<li><input disabled="" type="checkbox"/>
<i>Secure Shop. Customers need at least one trustworthy shop where they can buy their apps. This is a big challenge because it binds resources. And it ain't 100% secure. Just look at Apples Appstore. How many apps had tethering inside so far?</i> So mar there are only free apps in the store. They are mostly open source but they could be closed source. So in theory there could be bogus apps in the store. But if you think about it: where is the difference to any other kind of online store or download location? Or even the operating system. At some point you just have to trust them.</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>Easy backup of all the data on the device</i> check!</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>No enforcing of <em>the</em> cloud</i> check!</li>
</ul>
<p><em>Usability</em></p>
<ul>
<li><input disabled="" type="checkbox"/>
<i>sophisticated on screen keyboard. Provide some virtual cursor keys, so that a user can easily place the cursor. Fumbling with a magnifier is a no-go.</i> Nope, that one could be better, IMHO.</li>
<li><input disabled="" type="checkbox"/>
<i>A nice way to organize browser bookmarks - maybe that's a good idea for an extra app.</i> Nope, not yet?</li>
<li><i>A shop system where you can actually find something. Should be easy? Reality shows that it's not (so far).</i> There are not enough apps yet to answer that question.</li>
<li><input disabled="" type="checkbox"/>
<i>A shop system where you can try before you buy.</i> nope, but you must not pay so far :-D</li>
</ul>
<p><em>Apps</em></p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<i>Dropbox integration.</i> check!</li>
<li><input disabled="" type="checkbox" checked=""/>
<i>KeePass client.</i> Yes, Ownkeepass in the app store.</li>
<li><input disabled="" type="checkbox"/>
<i>BTSync</i> No client yet. You could install the ARM binary from developer mode but that would run the whole time, IMHO not fitting for a smart phone.
<i>Those two are the most important ones for me. Dropbox is cloud enough (well, after knowing about the NSA I am not so sure about that one), KeePass is simply crucial!</i></li>
<li><input disabled="" type="checkbox" checked=""/>
<i>IRC chat</i> There is a native IRC client in the app store.</li>
</ul>
<p>The software is still marked as Beta and that's okay. Jolla lacks of resources (as in manpower) and thus will not provide solutions for the missing bits and pieces in short time (if at all, it's my wish list). But they have provided 3 (sic!) OS updates in one month, even during the christmas holidays when running with a reduced staff.
To make it clear: this is a great and usable phone! It just needs some polish to bring shine to the diamond!</p>
<p>P.S.: If I write <em>he</em>, <em>she</em> is also included ;-) </p>
<h1><a class="header" href="#organize-your-data-or-stop-being-all-over-the-map" id="organize-your-data-or-stop-being-all-over-the-map">Organize your data or stop being all over the map</a></h1>
<p>In the last days I was trying to write my first app for [SailfishOS}(https://sailfishos.org/). The data - more or less a few email addresses - should be kept in some simple classes. Storing the data should be very, very basic, not optimal but also very simple. KISS at its best. While pondering about this I wondered how to preserve the data hierarchy. <code>QSettings</code> left the building at this moment. It shall be simple, so why not serialize the data to the disk? On start of the app I could simply read in all in. Or if you dislike a binary format, you could use XML. That's all true until the day you change something in your data model. At this point in time the pain kicks in and things aren't simple anymore. If you don't know what I am talking about right now, just imagine the lines of code you must write to change your data file format. One could say KISS my ass :-)</p>
<h2><a class="header" href="#database-to-the-rescue" id="database-to-the-rescue">Database to the rescue?</a></h2>
<p>Really, a database? That should be simple? Well, you're right if you think database server but since it all began with just a few settings, just enjoy the relief that comes with SQLite. Yes, I really said that. What's so über cool about SQLite? If you must upgrade your data model, you can simply run a bunch of SQL commands to do the work. The real dirty work is done by the SQLite software itself.</p>
<h2><a class="header" href="#change-the-model" id="change-the-model">Change the model?</a></h2>
<p>To track the data in your model and the database some IDs would come in handy, just add them to your existing classes. Wait a moment. How do I synchronize my classes with the database? How can I make use of multithreading to keep the UI fluent? Do I really want to write all this stuff ,like e.g. SQL inserts, updates and queries, on my own[1]? Where is the <em>simple</em> approach gone? Looks more like KIS to me (<em>Keep It Stupid</em>). Not later than now I asked myself if there isn't a out-of-the-box-solution? Problems like this persist in computer science for ages, someone must have built a pattern/library for this. Let's see what Qt got in store.</p>
<ul>
<li>First of all there is <code>QSqlDatabase</code>and will need it whatever your strategy is. It holds the basic connection to the database and allows an abstraction to the database driver.</li>
<li><code>QSqlQuery</code> executes an SQL query on a <code>QSqlDatabase</code>. Useful but also mean going bare feet.</li>
<li>You can load a result set into a <code>QSqlQueryModel</code>, great if you got read-only data. If you really got small amounts of data, you could use <code>QSqlQuery</code> to change the database and then let the view refresh = reload the whole table. Meh!</li>
<li><code>QSqlTableModel</code> brings you an abstracted model that operates on a single database table. The Qt documentation promises that no SQL knowledge is needed to work with that. Sounds not so bad.</li>
<li>And finally you can use <code>QSqlRelationalTableModel</code> to present a logical model that consists of several related database tables in the background. Just now I wonder how <code>QSqlRelationalTableModel::insertRowIntoTable</code> will mix with QML on the other side.</li>
</ul>
<h2><a class="header" href="#database-to-the-rescue-1" id="database-to-the-rescue-1">Database to the rescue!</a></h2>
<p>The moral of the story? Plan your data storage first, or short: database first! It pays off in the long run.
<em>In theory that all sounds very well</em> you say? You're right, this is all theory. Currently I am trying to use this inside a SailfishOS app for the Jolla phone. When it's done, I will send it to Github, that will be proof enough;-)</p>
<h2><a class="header" href="#update-1-20140118" id="update-1-20140118">Update #1 20140118</a></h2>
<p>Ok, this is gonna continue as a rant. If you use Qt with widgets, <code>QSqlTableModel</code> <em>is</em> your friend. Just tell a <code>QTableView</code> to use this as its model and everything is fine and works just out of the box. For whatever reason <code>QML</code> is now the <em>lingua france</em> for creating UIs and everything is <em>so</em> easy they promise. Yes, until you want to access your <code>QSqlTableModel</code> and live your daydream of <em>everthing works out of the box</em>. <em>Nohoo</em>, not in the Qt universe. They are even so bold to invent something like <em>Qt Quick Local Storage</em>. Yes, of course sir, you are right sir. Forget everything about separation of UI and your business logic. Let's soften all boundaries and go back into the stone age of programming and enter <a href="http://www.venganza.org">the church of the flying Spaghetti Monster</a>.</p>
<p>[1] If you've read <em>The Pragmatic Programmer - From Journeyman to Master</em>* you will certainly refuse to do so. One could write a generator script to produce all that boilerplate code, but I think it should go even more elegant.*</p>
<h1><a class="header" href="#sometimes-you-need-to-put-your-finger-on-the-product" id="sometimes-you-need-to-put-your-finger-on-the-product">Sometimes you need to put your finger on the product</a></h1>
<blockquote>
<p>I’ve done a few product workshops in my time … One thing I see over and over again is a focus on features.[...]“OK, so I’ve just loaded the app for the first time. What next?”[...]</p>
</blockquote>
<p>Interesting read in the <a href="http://www.teamsandtechnology.com/dh/blog/2014/01/12/features-or-flow/">blog of David Harvey</a>.</p>
<h1><a class="header" href="#helloworld-using-a-library-on-sailfishos-1" id="helloworld-using-a-library-on-sailfishos-1">HelloWorld! using a library on SailfishOS 1</a></h1>
<p>This is just a little hello world project for SailfishOS that makes use of a library, to show how you</p>
<ul>
<li>can build your own libraries</li>
<li>present the properties therein to the QML layer</li>
<li>deploy it with your SailfishOS application</li>
</ul>
<p>You find the example on <a href="https://github.com/hardcodes/SFOSHelloWorldWithLibrary_01">Github</a>.</p>
<p>AFAIK you should use the <code>SUBDIRS</code> template in project files to create projects that depend on self build libraries or other projects to be more generic. But so far I was not able to deploy them with the SailfishOS SDK.</p>
<p><em>As of now this is just a workaround (IMHO)</em>.</p>
<h1><a class="header" href="#sailfishos---whats-pkg-config" id="sailfishos---whats-pkg-config">SailfishOS - what's pkg-config?</a></h1>
<p>ou started developing for the Jolla phone, downloaded the <a href="https://sailfishos.org">SailfoshOS SDK</a> and started coding. After a while you stumble upon <code>pkg-config</code>. What's that?</p>
<p>bq. <code>pkg-config</code> is a helper tool used when compiling applications and libraries. It helps you insert the correct compiler options on the command line so an application can use <code>gcc -o test test.cpkg-config --libs --cflags glib-2.0</code> for instance, rather than hard-coding values on where to find glib (or other libraries). It is language-agnostic, so it can be used for defining the location of documentation tools, for instance.
Cited from <a href="http://www.freedesktop.org/wiki/Software/pkg-config/">freedesktop.org</a>.</p>
<p>bq. The primary use of pkg-config is to provide the nec- essary details for compiling and linking a program to a library. This metadata is stored in pkg-config files. These files have the suffix .pc and reside in specific locations known to the pkg-config tool.
Cited from <a href="http://people.freedesktop.org/%7Edbn/pkg-config-guide.html">free desktop.org</a>.</p>
<p>That being said you find <code>.pc</code> files on the SailfishOS MerSDK VM. If you compile for the emulator, it is <code>/srv/mer/targets/SailfishOS-i486-x86/usr/lib/pkgconfig</code>
So that means if you want to compile a program that depends on other libraries, there you find the names that you can use in the <code>PkgConfigBR</code> section of the <code>.yaml</code> file. Of course that does not mean that your app will be accepted in the harbor ;-)
Using <code>pkg-config</code> in the shell directly will not provide any useful information. It is used inside the <em>Scratchbox2</em> environment.</p>
<h1><a class="header" href="#helloworld-using-a-library-on-sailfishos-2" id="helloworld-using-a-library-on-sailfishos-2">HelloWorld! using a library on SailfishOS 2</a></h1>
<p>This is the second edition of a little hello world project for SailfishOS that makes use of a library. It will show how you</p>
<ul>
<li>can build your own libraries</li>
<li>present the properties therein to the QML layer</li>
<li>deploy it with your SailfishOS application</li>
</ul>
<p>You find the example on <a href="https://github.com/hardcodes/SFOSHelloWorldWithLibrary_02">Github</a>.</p>
<p>I am still not 100% happy with this version, but it is the only way I managed to use <code>TEMPLATE=subdirs</code> in <code>.pro</code> files with the SailfishOS SDK. Currently the <a href="https://together.jolla.com/question/16802/bug-sdk-cant-handle-subdirs-template-on-osx/">SDK expects the project directories to be arranged so that the 'rpm' directory is on the main project directory level</a>. And <em>that</em> is exactly <em>not</em> what I want. Well, it's doable, just put the main <code>.pro</code> file in the directory of your SFOS project.</p>
<h1><a class="header" href="#model-model-on-the-wall" id="model-model-on-the-wall">Model, model on the wall...</a></h1>
<p>...who is doing QML at all?
Wut? Is he doing drugs? Nope, I was just in the mood for a rhyme like in <em>wine dine 69</em>.</p>
<p>Now take that!</p>
<p>Ever expected <em>that</em> rhyme in a technical blog?</p>
<p>As I have written in <a href="./20140112--1.html">Organize your data or stop being all over the map</a> I am still playing with thoughts about data storage / structure and how to support that with code. But in the spirit of laziness <em>or code manageability to sound more professional</em> it shall be as few code lines as possible.</p>
<p>If you use widgets in Qt, it can be quite easy to use SQL databases. If you use QML with Qt the story gets an aftertaste. Things that were easy before are not anymore. Let's don't keep on ranting and focus on a solution to the problems that ocured.</p>
<p>If you use(d) <a href="http://qt-project.org/doc/qt-5/qabstractitemmodel.html%22"><code>&quot;QAbstractItemModel</code></a> you will have come across the <a href="http://qt-project.org/doc/qt-5/qt.html#ItemDataRole-enum%22"><code>Qt::ItemDataRole</code></a> enum. When a view requests data from your <code>QAbstractItemModel</code>, it simply calls the <code>data()</code> method for some <code>QModelIndex</code> and a <code>Qt::ItemDataRole</code>. The <em>index</em> describes the position of the needed data, e.g. column and row in a table. The <em>role</em> indicate the type of the needed data. <code>Qt::DisplayRole</code> will ask for the data that should be shown as text, <code>Qt::ForegroundRole</code> will determine the font color needed to draw the data and so on.</p>
<p>Here is a code snippet taken from <a href="http://qt-project.org/doc/qt-5/qsqltablemodel.html">http://qt-project.org</a>.</p>
<pre><code class="language-cpp">QSqlTableModel *model = new QSqlTableModel(parentObject, database);
model-&gt;setTable(&quot;employee&quot;);
model-&gt;setEditStrategy(QSqlTableModel::OnManualSubmit);
model-&gt;select();
model-&gt;removeColumn(0); // don't show the ID
model-&gt;setHeaderData(0, Qt::Horizontal, tr(&quot;Name&quot;));
model-&gt;setHeaderData(1, Qt::Horizontal, tr(&quot;Salary&quot;));
QTableView *view = new QTableView;
// this one liner is enough
view-&gt;setModel(model);
view-&gt;show();
</code></pre>
<p>One line of code is enough to tell the view about the model, the rest is done automagically behind the scenes.</p>
<p>h3. A new king in town</p>
<p>With QML the rules (or shall I say roles?) have changed. If you present a <code>QSqlTableModel</code> to a QML view via <code>QQmlContext::setContextProperty</code>, the result is something like <em>that's all Greek to me</em>.</p>
<p>If you write your own C++ classes that should expose data to the QML world, you will face the <code>Q_PROPERTY</code> or <code>Q_INVOKABLE</code> macro. Those macros provide the glue between both worlds, or in other words: things known to the property system can be reached in the QML world. For whatever reason a <code>QSqlTableModel</code> does not build the needed property bindings on its own. Thus the QML world does not know anything about those objects or at least not enough or the C++ world does not know how to respond to <em>questions</em> from the QML side.</p>
<p>The keyword is <em>roles</em> here. Those are the vocabulary that QML uses to squeeze some data out of a C++ object. Since Qt does not do the job for you, we will find a way to do it on our own. The fact that you <em>have</em> to do something on your own is battlesome but does not change the situation in the end. If you want to use any descendants of <code>QAbstractItemModel</code>, that's your way to go.</p>
<p>Let's assume you've got a SQLite database with a <em>persons</em> table and <em>id</em>, <em>firstname</em>, <em>lastname</em> columns. Those shall be presented in a <a href="http://qt-project.org/doc/qt-5.0/qtquick/qml-qtquick2-listview.html"><code>ListView</code></a> and your C++ model is known to the QML world via <code>QQmlContext::setContextProperty</code> by the name <em>cppPersonsModel</em>. Somewhere in the delegate for the <code>ListView</code> you reach out for this data:</p>
<pre><code class="language-cpp">cppPersonsModel.firstname
cppPersonsModel.lastname
</code></pre>
<p>To achieve this the QML side will ask for every <code>Qt::DisplayRole</code> in your <code>QSqlTableModel</code> by calling <code>roleNames()</code>. This returns a <code>QHash&lt;int, QByteArray&gt;</code> and is searched for the column names.</p>
<p>Slow please.</p>
<p>Ok,</p>
<p>here once again:</p>
<ul>
<li>you have written <code>cppPersonsModel.firstname</code> in your QML code</li>
<li><code>roleNames()</code> is called (only once I guess)</li>
<li><code>QHash&lt;int, QByteArray&gt;</code> is returned from the C++ model</li>
<li><code>firstname</code> is looked up in the <code>QByteArray</code></li>
<li>the matching <code>int</code> is the value for the <code>role</code> parameter when the model is queried with a call of <code>data(const QModelIndex &amp; index, int role = Qt::DisplayRole) const</code></li>
</ul>
<p>Thus your model must be able the deliver the role names and must know how to translate the role (name) to the database column. Since Qt5 the <code>void QAbstractItemModel::setRoleNames ( const QHash&lt;int, QByteArray&gt; &amp; roleNames )</code> is marked as deprecated and is <em>protected</em>. This and the second requirement (translate role into column names) cause that you must subclass <code>QSqlTableModel</code> and code the needed features on your own.</p>
<p><em>That</em> is what I've done as an example and you can look at it on <a href="https://github.com/hardcodes/QSqlTableModel_with_QML_readonly">Github</a>.</p>
<p>The code to use this subclass in the end is as follows:</p>
<pre><code class="language-cpp">QScopedPointer&lt;ProxyQSqlTableModel&gt; personsModel(new ProxyQSqlTableModel(&amp;app, database));
personsModel-&gt;setTable(&quot;person&quot;);
personsModel-&gt;setEditStrategy(QSqlTableModel::OnManualSubmit);
personsModel-&gt;select();
// skipped some stuff unrelated to QSqlTableModel 
context-&gt;setContextProperty(&quot;cppPersonsModel&quot;, personsModel.data());
</code></pre>
<p>As you can see, now it's as easy as with the old widgets. Time for coffee :-)</p>
<h1><a class="header" href="#pump-up-the-message---blocked-from-the-promised-future" id="pump-up-the-message---blocked-from-the-promised-future">Pump up the message - blocked from the promised future</a></h1>
<p>Every window system I know of, uses an implementation of an <em>event loop</em> to process things like mouse button clicks and alike. Maybe in your window system it's not called <em>event loop</em>, maybe the term <em>message dispatcher</em>, <em>message loop</em> or <em>message pump</em> is used. The basic idea behind this should be the same: the operating system handles things like mouse movements, interrupts and puts them into a central queue.</p>
<p><img src="./gfx/75.png" alt="" /></p>
<p>A dispatcher pulls event after event from this queue and decides which process should handle it. In case of interrupts you may have registered to be informed when it happens. When the user presses the mouse button, the dispatcher can calculate which window is affected and hand control over to the corresponding process.</p>
<p><img src="./gfx/76.png" alt="" /></p>
<p>As long as the process handles this event, no GUI drawing happens, no further events are taken from the queue by the dispatcher or if dispatched are queued on process level, they are not further processed there.</p>
<p><img src="./gfx/77.png" alt="" /></p>
<h2><a class="header" href="#the-problem" id="the-problem">The problem</a></h2>
<p>On one hand that means that you as a coder have to return control to the dispatcher as fast as possible and on the other hand every kind of long processing has to be handled concurrently, e.g. in another thread. This peculiarity is shared by many operating systems and programming languages. It does not matter if it's Linux, OSX or Windows (or something else) and it happens regardless of the language used. Be it C, C++, C#, Java and whatnot. This blog entry is about what that means for C++ programs compared to the solutions in other paradigms.</p>
<h2><a class="header" href="#the-solution" id="the-solution">The solution</a></h2>
<p>Instead of putting the blocking operations into the event handler, shovel it into a separate function and call it in another thread. Your event handler can return immediately, events will still be processed and the GUI can be drawn.
And they live happily ever after, don't they?</p>
<h2><a class="header" href="#more-problems" id="more-problems">More problems</a></h2>
<p>Depending on programming language and operating system, creating a new thread can be just a few lines of code or royal PITA (I am looking at you, Qt framework), consisting of tons of boiler plate code. When the thread is finished, it must somehow inform your main program about it. If the user pressed a button and started whatever action, he should be notified that something has happened. Some thread implementations are not designed to do that, they are more like hit and run. Not so useful in UI programming.</p>
<p>Let's assume starting a new thread is as easy as pie and your are informed that the thread has ended, the handling usually happens in some sort of <em>callback function</em> (or <em>slot</em> or <em>delegate</em> or…), or in other words: it happens somewhere else. Maybe you are even still in the context of the separate thread and can not draw to the GUI.</p>
<p>If you are using C#/.NET, you get help from the <a href="http://msdn.microsoft.com/de-de/library/system.componentmodel.backgroundworker(v=vs.110).aspx%22">BackGroundWorker class</a> that abstracts the thread handling, there are also some lines of code to write but they are handled by the IDE mostly. You as the coder can focus on the task itself.</p>
<p>If you want something like that in C++, you must write it on your own. Even in GUI frameworks like Qt, which set out to ease the pain of writing UIs in C++, there is nothing comparable. Yes, it's doable, but stupid boiler plate repetitive work. <em>For the ones that didn't get it so far: I'm in a love/hate relationship with the Qt framework.</em> I don't even want to talk about writing native (cough, MFC, cough) code for Windows. That's just ridiculous and clearly not the foundation for the success of that platform.</p>
<p>On top of that most UIs don't just have only one button, your code base grows, the code flow is interrupted and bit by bit it transforms to spaghetti code.</p>
<p><img src="./gfx/78.jpg" alt="" /></p>
<p>A maintenance nightmare.</p>
<h2><a class="header" href="#cut-down-to-the-chase" id="cut-down-to-the-chase">Cut down to the chase</a></h2>
<p>Long story short: </p>
<ul>
<li>your code must return fast from an event handler</li>
<li>you probably want to write stuff like <em>first do task A asynchronous and task B afterwards</em></li>
</ul>
<h2><a class="header" href="#a-better-solution" id="a-better-solution">A better solution</a></h2>
<h3><a class="header" href="#c" id="c">C#</a></h3>
<p>Let's have a closer look how it's done in C# nowadays:</p>
<pre><code class="language-csharp">async Task&lt;int&gt; GetAnswerToTheUltimateQuestionOfLifeTheUniverseAndEverything()
{ 
    HttpClient client = new HttpClient();
    // GetStringAsync returns a Task&lt;string&gt;. That means that when you await the 
    // task you'll get a string (urlContents).
    Task&lt;string&gt; getStringTask = client.GetStringAsync(&quot;http://blog.hardcodes.de&quot;);
    // work here that doesn't rely on the string from GetStringAsync.
    InitDeepThought();
    //  - The await operator suspends GetAnswerToTheUltimateQuestionOfLifeTheUniverseAndEverything. 
    //  - GetAnswerToTheUltimateQuestionOfLifeTheUniverseAndEverything can't continue until getStringTask is complete. 
    //  - Meanwhile, control returns to the caller of GetAnswerToTheUltimateQuestionOfLifeTheUniverseAndEverything. 
    //  - Control resumes here when getStringTask is complete.  
    //  - The await operator then retrieves the string result from getStringTask. 
    string urlContents = await getStringTask;
    // ignore string and return the only true answer anyway
    return 42;
}
</code></pre>
<p>Isn't that cool? Spin off concurrent execution simply by calling an async function and then continue on the task object when it's ready! The given example was not GUI based but that's exactly the kind of pattern we need.</p>
<h3><a class="header" href="#objective-c" id="objective-c">Objective-C</a></h3>
<pre><code class="language-objc">- (void)viewWillAppear:(BOOL)animated
{
    dispatch_queue_t downloadQueue = dispatch_queue_create(“image downloader”, NULL);
    dispatch_async(downloadQueue, ^{
         NSData *imageData = [NSData dataWithContentsOfURL:networkURL];
         dispatch_async(dispatch_get_main_queue(), ^{
             UIImage *image = [UIImage imageWithData:imageData];
             self.imageView.image = image;
             self.imageView.frame = CGRectMake(0, 0, image.size.width, image.size.height);
             self.scrollView.contentSize = image.size;
         });
    });
    dispatch_release(downloadQueue);
}
</code></pre>
<p><em>Example taken from <a href="https://itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255?mt=10">iPad and iPhone Application Development by Paul Hegarty</a></em></p>
<p>Before we dive into this example, just a few words to those not familiar with Objective-C: code starting with a caret sign ( as in <code>^{ //some code here }</code>) is called a <em>Block</em>. This is simply a Lambda function. The <code>dispatch_…</code> code parts call a C API from a library named <em>Grand Central Dispatch</em>. It is used to put <em>Blocks</em> of code in queues that are executed in separate threads. Very similar
to the event queueing of the operating system, instead of events some pieces of code are queued. Remember the <em>GCD</em> name, we will come back to that later on.</p>
<p>The above mentioned example downloads an image from a network URL in a separate thread and when that is done, it puts the image somewhere in the UI. The UI can only be manipulated from the main thread, so this <em>Block</em> of code is queued on the main thread.</p>
<p>By far not as elegant as the C# solution but still a pretty lean way to keep the corresponding pieces of code together. Everything is written in the same function but executed at different times in another context. The burden of multithreading is lifted and abstracted away.</p>
<h3><a class="header" href="#c--a-better-solution-lies-in-the-future" id="c--a-better-solution-lies-in-the-future">C++,  a better solution lies in the future</a></h3>
<p>With C++11 came a nice feature called <em>future</em> which provides a mechanism to access the result of asynchronous operations. Those asynchronous operations can be started with <em>async</em>.</p>
<pre><code class="language-cpp">// std::async returns a future, looks like a C# task object at first glance
auto f = std::async(
    [](){
        return 42;
    });
...// do something completely different and finally
   // fetch the result
int answer = f.get();
</code></pre>
<p>The caveat here is that calling <code>get()</code> on the <em>future</em> blocks. While there are scenarios where this kind of behavior s useful, for firing up your UI it is <em>not</em>. IMHO that is humiliating in the year 2014, but who am I to criticize the C++ language?</p>
<h2><a class="header" href="#solutions-that-work-now-already" id="solutions-that-work-now-already">Solutions that work now already</a></h2>
<h3><a class="header" href="#microsoft" id="microsoft">Microsoft</a></h3>
<p>Microsoft has created the <a href="http://msdn.microsoft.com/en-us/library/dd492418.aspx">PPL</a>, a library that can amongst other tasks be used to execute work items in parallel. If you are in WinRT programming, you will certainly stumble upon this because there you will use the concept of continuations for executing stuff async and keeping the UI fluent.</p>
<p>On <a href="http://www.codeproject.com/Articles/585998/Csharp-style-async-await-in-Cpl">Code Project</a> is a nice article about using the open source versions of this library. I have not tried that personally (yet) but maybe this is a nice way of using this with another OS.</p>
<h3><a class="header" href="#qt" id="qt">Qt</a></h3>
<p>At the QtDevDays2013 <a href="http://ivan.fomentgroup.org/">Ivan Čukić</a> held a nice talk about &quot;Natural task scheduling using futures and continuations&quot;. Using QFutures and some clever template meta programming he introduced an example of writing readable code. If you use the Qt framework, you should give it a try!</p>
<h3><a class="header" href="#apple" id="apple">Apple</a></h3>
<p>Make sure that you watch <a href=":http://channel9.msdn.com/Events/GoingNative/2013/Cpp-Seasoning">Sean Parent's talk</a> from GoingNative2013. Among a lot of useful insight in coding he mentions  <a href="https://libdispatch.macosforge.org">libdispatch</a>, published from Apple open source. Out of fairness - and before I begin to write what fascinated me - I must mention that I first was linked to the talk in this <a href="https://twitter.com/meetingcpp/status/376372602089897985">tweet</a> from <em>Meeting C++</em>. The part I am referring to would also <a href="http://meetingcpp.com/index.php/br/items/resumable-functions-async-and-await.html">match here</a>. Remember the <em>Grand Central Dispatch</em> library in the Objective-C example? The library is open source, too!
And Sean parent uses that one to create an even more convenient way to use the power of the library, since he <a href="https://github.com/sean-parent/sean-parent.github.com/wiki/Papers-and-Presentations">posted the slides</a> in public, I think it's OK to quote his example code here:</p>
<pre><code class="language-cpp">namespace adobe {
template &lt;typename F, typename ...Args&gt;
auto async(F&amp;&amp; f, Args&amp;&amp;... args)
-&gt; std::future&lt;typename std::result_of&lt;F (Args...)&gt;::type&gt;
{
    using result_type = typename std::result_of&lt;F (Args...)&gt;::type;
    using packaged_type = std::packaged_task&lt;result_type ()&gt;;
    auto p = new packaged_type(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...);
    auto result = p-&gt;get_future();
    dispatch_async_f(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
    p, [](void* f_) {
        packaged_type* f = static_cast&lt;packaged_type*&gt;(f_);
        (*f)();
        delete f;
    });
return result;
}
} // namespace adobe
</code></pre>
<p>Seems worth looking at, doesn't it?
So there are some alternatives to circumvent the blocking <code>future.get()</code> but as nice as they are - they are not standardized. And being in the standard is IMHO needed to get programmers to use such features in their code.</p>
<p>Hopefully the <a href="https://isocpp.org/std/status">Parallelism and / or Concurrency TS</a> get us going this year.</p>
<h1><a class="header" href="#data-races-in-stl-containers" id="data-races-in-stl-containers">Data races in STL containers</a></h1>
<p>While reading in Effective STL from Scott Meyers I came across item 12 (Have realistic expectations about thread safety of STL containers). Scott basically says that multiple readers and multiple writers to different containers are safe. One should not expect more.</p>
<p>Then I remember Bjarne Stroustrup talking about thread safety that came with C++11. I don't recall which video it was, IMHO a keynote of a conference. So what exactly does the standard say for C++11,  containers and thread safety?</p>
<blockquote>
<p>23.2.2 Container data races [container.requirements.dataraces]</p>
<p>1 For purposes of avoiding data races (17.6.5.9), implementations shall consider the following functions to be const: begin, end, rbegin, rend, front, &gt; back, data, find, lower_bound, upper_bound, equal_range, at and, except in associative or unordered associative containers, operator[].</p>
<p>2 Notwithstanding (17.6.5.9), implementations are required to avoid data races when the contents of the contained object in different elements in the &gt; same sequence, excepting vector<bool>, are modified concurrently.</p>
</blockquote>
<p>So there is more in the box than before. Lucky me, since I've started learning C++ not so long ago :-)</p>
<p>Bonus chatter: C++ is the first computer language where I ever looked up what the standard says. Maybe it's this kind of mystery that attracts me to C++.</p>
<p>But for now let's have a look at Scott's first example from item12:</p>
<pre><code class="language-cpp">vector&lt;int&gt; v;
...
vector&lt;int&gt;::iterator first5(find(v.begin(), v.end(), 5));   // Line1
if (first5 != v.end()){                                      // Line2 
    *first5 = 0;                                             // Line3
}
</code></pre>
<p>Another thread could change the content of vector v, after line1 has been completed. Do the extended data race rules do us any good here? I think not. Albeit saying that begin and end shall be const, I don't see why this would prevent a second thread changing the data in v, after line 1 was computed. Thus the iterator first5 could be invalid right after line1. v.end() should be const but for how long? I am quite sure that it can change between line 1 and 2.</p>
<p>That does not mean, that the committee did a bad job or that there is no such thing as thread safety in C++11 STL containers. Everything is in order here, but you still need to think about what you are doing, <em>&quot;C++11 is thread safe now&quot;</em> is no excuse!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
